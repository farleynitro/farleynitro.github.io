[
  {
    "path": "posts/2022-10-05-exploracin-de-datos/",
    "title": "Exploración de datos",
    "description": "Explorando",
    "author": [
      {
        "name": "Farley Rimon",
        "url": {}
      }
    ],
    "date": "2022-10-05",
    "categories": [],
    "contents": "\r\nLimpiando el database\r\nPrimero, cargaremos los paquetes que utilizaremos en esta sesión:\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(sjmisc)\r\nlibrary(haven)\r\nlibrary(kableExtra)\r\nlibrary(readxl)\r\nlibrary(skimr)\r\nlibrary(sjPlot)\r\nlibrary(naniar)\r\nlibrary(ggcorrplot)\r\n\r\n\r\nY cargaremos la base de datos con variables ya seleccionadas:\r\n\r\n\r\ndf_2014 <- read_sav(\"data/Base_en_SAV_Primera_Encuesta_Nacional_de_Medio_Ambiente_2014.sav\")\r\ndf_2015 <- read_sav(\"data/Base_en_SAV_Encuesta_Medio_Ambiente_2015.sav\")\r\ndf_2016 <- read_sav(\"data/Base_en_SAV_Encuesta_de_Medio_Ambiente_2016.sav\")\r\ndf_2018 <- read_excel(\"data/Base-en-excel-Encuesta-Nacional-de-Medio-Ambiente-2018.xlsx\")\r\n\r\n\r\nEs importante mencionar que algunas preguntas están doble. Como\r\npregunta abierta, y luego fueron codificadas a base de respuestas\r\nsimilares.\r\n\r\n\r\nskimr::skim(df_2018)\r\n\r\n\r\n\r\n\r\nskimr::skim(df_2016)\r\nsjPlot::view_df(df_2016)\r\n\r\n\r\n\r\n\r\n(sum(is.na(df_2016))/prod(dim(df_2016)))*100\r\n\r\n[1] 2.236765\r\n\r\n\r\n\r\nskimr::skim(df_2015)\r\n\r\n\r\n\r\n\r\n(sum(is.na(df_2015))/prod(dim(df_2015)))*100\r\n\r\n[1] 35.43604\r\n\r\n\r\n\r\nskimr::skim(df_2014)\r\n\r\n\r\n\r\n\r\n(sum(is.na(df_2014))/prod(dim(df_2014)))*100\r\n\r\n[1] 31.38757\r\n\r\nVemos que la cantidad de datos faltantes es poca para el 2016, un 2%\r\nde la base.2014 y 2015 ya tienen mas del 30% de datos faltantes. Si\r\nocurre en solo unas de las columnas, se pueden remover de la base para\r\ntener una base de datos limpia. Para eso usamos la funcion sort:\r\n\r\n\r\nsort( colSums( sapply(df_2016, is.na) ), decreasing=TRUE) %>% head(20)\r\n\r\n     P50B      P11A      P11B      P11C      P11D      P11E      P11F \r\n     1921      1753      1753      1753      1753      1753      1753 \r\n    P47_A       P48       P49       P50    INICIO   TERMINO     fecha \r\n      716       716       716       716       631       598       163 \r\n     P17F      P17J     FOLIO    COMUNA    region macrozona \r\n        1         1         0         0         0         0 \r\n\r\nVemos que son 14 columnas con datos faltantes para el 2016. De 2170\r\nobservaciones, falta más de el 25% (598/2170*100%= 27.2%) de los datos\r\npara los indicadores. Removemos todas las columnas que le falten mas de\r\n15% de las observaciones. En vez de observar cuales columnas tiene mas\r\nde 15% en el 2015 y 2014, removemos las columnas directamente ya que no\r\nson útiles en todo caso.\r\n\r\n\r\ndf_2016_final <- df_2016[, colMeans(is.na(df_2016)) <= .15]\r\ndf_2015_final <- df_2015[, colMeans(is.na(df_2015)) <= .15]\r\ndf_2014_final <- df_2014[, colMeans(is.na(df_2014)) <= .15]\r\n\r\n\r\nEl siguiente Excel ofrece una descripción de la base de datos de las\r\nencuestas.\r\nPrimero la data era la siguiente.\r\n\r\n\r\n\r\nAño encuesta\r\n\r\n\r\nObservaciónes\r\n\r\n\r\nPreguntas\r\n\r\n\r\n% Datos faltantes\r\n\r\n\r\nTipos caracter\r\n\r\n\r\nTipos numéricos\r\n\r\n\r\nTipos fecha\r\n\r\n\r\nTipos difftime\r\n\r\n\r\n2014\r\n\r\n\r\n5057\r\n\r\n\r\n89\r\n\r\n\r\n31.90\r\n\r\n\r\n7\r\n\r\n\r\n82\r\n\r\n\r\n0\r\n\r\n\r\n0\r\n\r\n\r\n2015\r\n\r\n\r\n5664\r\n\r\n\r\n113\r\n\r\n\r\n35.40\r\n\r\n\r\n12\r\n\r\n\r\n101\r\n\r\n\r\n0\r\n\r\n\r\n0\r\n\r\n\r\n2016\r\n\r\n\r\n2170\r\n\r\n\r\n344\r\n\r\n\r\n2.23\r\n\r\n\r\n47\r\n\r\n\r\n294\r\n\r\n\r\n1\r\n\r\n\r\n2\r\n\r\n\r\n2018\r\n\r\n\r\n7601\r\n\r\n\r\n169\r\n\r\n\r\n0.00\r\n\r\n\r\n85\r\n\r\n\r\n84\r\n\r\n\r\n0\r\n\r\n\r\n0\r\n\r\n\r\n\r\nvemos que habian columnas especificas con la mayoria de los datos\r\nfaltantes. Las columnas que quedan, juntas, tienen menos del 0.19% con\r\ndatos faltantes. Esta fracción del total se puede ignorar. Despues de\r\nlimpiar el database, el overview cambia a la siguiente.\r\n\r\n\r\n(sum(is.na(df_2016_final))/prod(dim(df_2016_final)))*100\r\n\r\n[1] 0.02297186\r\n\r\n(sum(is.na(df_2015_final))/prod(dim(df_2015_final)))*100\r\n\r\n[1] 0.1453809\r\n\r\n(sum(is.na(df_2014_final))/prod(dim(df_2014_final)))*100\r\n\r\n[1] 0.1862764\r\n\r\n\r\n\r\nskimr::skim(df_2014_final)\r\nskimr::skim(df_2015_final)\r\nskimr::skim(df_2016_final)\r\n\r\n\r\n\r\n\r\n\r\nAño encuesta\r\n\r\n\r\nObservaciónes\r\n\r\n\r\nPreguntas\r\n\r\n\r\n% Datos faltantes\r\n\r\n\r\nTipos caracter\r\n\r\n\r\nTipos numéricos\r\n\r\n\r\nTipos fecha\r\n\r\n\r\nTipos difftime\r\n\r\n\r\n2014\r\n\r\n\r\n5057\r\n\r\n\r\n89\r\n\r\n\r\n0.1862764\r\n\r\n\r\n7\r\n\r\n\r\n43\r\n\r\n\r\n0\r\n\r\n\r\n0\r\n\r\n\r\n2015\r\n\r\n\r\n5664\r\n\r\n\r\n113\r\n\r\n\r\n0.1453809\r\n\r\n\r\n12\r\n\r\n\r\n52\r\n\r\n\r\n0\r\n\r\n\r\n0\r\n\r\n\r\n2016\r\n\r\n\r\n2170\r\n\r\n\r\n344\r\n\r\n\r\n0.0229719\r\n\r\n\r\n47\r\n\r\n\r\n283\r\n\r\n\r\n1\r\n\r\n\r\n0\r\n\r\n\r\n2018\r\n\r\n\r\n7601\r\n\r\n\r\n169\r\n\r\n\r\n0.0000000\r\n\r\n\r\n85\r\n\r\n\r\n84\r\n\r\n\r\n0\r\n\r\n\r\n0\r\n\r\n\r\n\r\nEncontrando las\r\nvariables operacionales\r\nEncuesta nacional del 2018\r\nPara simplificar el analisis, decido enfocarme solo en el 2016 y 2018\r\nya que es el mas completo de los años. A base del 2016 y 2018 decido\r\ncuales van a ser mis variables operacionales para todos los años.\r\n\r\n\r\n#re-ordering dataframe to have indicators in front\r\n\r\ndf_2018_final <- df_2018 %>%\r\n  select(\"ZONAS\", \"ID\", \"COMUNA\", \"NSE\",\"TNSE\",\"NEDAD\",\"TEDAD\",\"REGION\",\"CUOTA\",\"POND\", P32,P33,P34,P35,P36,P37,P38,P39, everything())\r\nsjPlot::view_df(df_2018_final)\r\n\r\n\r\n\r\n\r\n\r\nExploración de\r\nvariables independientes\r\nPrimero que escoger mis variables independientes voy a tener que\r\nentender su sesgo y varianca. Tengo mas que nada entender mis datos para\r\nasi tambien entender mis resultados.\r\nVariables socio-económicos y socio-demograficas son:\r\nZonas (macrozona en Chile)\r\nID (xxxxx)\r\nComuna (xxxxxxx)\r\nNSE (nivel Soco-Economico)\r\nTNSE (xxxxx)\r\nNEDAD (categórica de edad; 18-34;31-45; 46-60;\r\n61+)\r\nTEDAD (categórica de edad; 18-34; 35-54; 55+)\r\nREGION (16 regiones)\r\nCUOTA (xxxxxx)\r\nPOND\r\nP32: Sexo (categórica: Hombre (1); Mujer (0))\r\nP33: Edad (variable continua)\r\nP34: Nivel de educación (categórica del 1-10)\r\nP36: Estudia (categórica: Si(1);No (2))\r\nP37: Nivel de educación con mas aporte al ingreso del hogar\r\n(categórica: 1-10)\r\nP38: Profesión con mas aporte al ingreso del hogar\r\n(categórica: 1-10)\r\nP39: Religión (categórica: 1-9)\r\nP43: Tipo de combustible que usa el vehiculo del encuestado\r\n(categórica: 1-..)\r\nP8: Razón por la que alguien no usa bicicleta (categórica:\r\n1-..)\r\nP18: Opinion de la causa del cambio climatico (categórca:\r\n1-..)\r\nDe estas solo considero las cursivas. Las cursivas voy a analizar\r\npara multicolineadid y asi reducir las variables independientes usadas\r\nmas.\r\n\r\n\r\n\r\n\r\n\r\n# Rename columns of independent variables\r\ndf_2018_final <-  df_2018_final %>% rename('Razon_Bici'= 'P8','Razon_Cambio_Cl'= 'P18','Automovil_Combustible'= 'P43', 'Sexo'='P32' ,'Edad'='P33' ,'Niv_Edu'='P34','Estudiante'='P36','Edu_Ingr'='P37','Trab_Ingr'= 'P38','Religion'='P39', 'Transporte_mas_freq' = 'P7')\r\n\r\n\r\n\r\n\r\nvar_ind <- df_2018_final %>% \r\n  select(ZONAS, NSE, TNSE, NEDAD, TEDAD, CUOTA, Sexo, Edad, Niv_Edu, Estudiante, Edu_Ingr, Trab_Ingr, Religion, Razon_Bici,Razon_Cambio_Cl,Automovil_Combustible, Transporte_mas_freq\r\n         ) %>% \r\n    group_by(ZONAS) %>% \r\nsummarise_all(function(x)  mean(x, na.rm = T))\r\n  # na.omit()\r\n\r\n\r\nVemos que hay un warning. Vamos a ver cual variable ocasiona estos\r\nwarning y porque. Yo pienso que son\r\nRazon_Bici,Razon_Cambio_Cl,Automovil_Combustible. Las ultimas 3\r\nvariables tienen un “.”, un dato que se puede considerar NA. Como no se\r\npuede reemplezar lo mejor es imputarlo con el valor que es equivalente a\r\n“No Responde” para estas preguntas, el número 9 para\r\nRazon_Cambio_Cl(P18) y Automovil_Combustible (P43), el número\r\n99 para Razon_Bici (P8). Cambiamos las\r\ncolumnas a numeric y terminamos. Despues, volvemos a formar un\r\nsubset de las variables independientes.\r\n\r\n\r\nunique(df_2018_final$ZONAS)\r\nunique(df_2018_final$NSE)\r\nunique(df_2018_final$TNSE)\r\nunique(df_2018_final$NEDAD)\r\nunique(df_2018_final$TEDAD)\r\nunique(df_2018_final$CUOTA)\r\nunique(df_2018_final$Sexo)\r\nunique(df_2018_final$Edad)\r\nunique(df_2018_final$Niv_Edu)\r\nunique(df_2018_final$Estudiante)\r\nunique(df_2018_final$Razon_Bici)\r\nunique(df_2018_final$Razon_Cambio_Cl)\r\nunique(df_2018_final$Automovil_Combustible)\r\nunique(df_2018_final$Transporte_mas_freq)\r\n\r\ndf_2018_final[\"Razon_Bici\"][df_2018_final[\"Razon_Bici\"] == \".\"] <- \"9\"\r\ndf_2018_final[\"Razon_Cambio_Cl\"][df_2018_final[\"Razon_Cambio_Cl\"] == \".\"] <- \"99\"\r\ndf_2018_final[\"Automovil_Combustible\"][df_2018_final[\"Automovil_Combustible\"] == \".\"] <- \"99\"\r\n\r\nvar_ind <- df_2018_final %>% \r\n  select(ZONAS, NSE, TNSE, NEDAD, TEDAD, CUOTA, Sexo, Edad, Niv_Edu, Estudiante, Edu_Ingr, Trab_Ingr, Religion, Razon_Bici,Razon_Cambio_Cl,Automovil_Combustible, Transporte_mas_freq\r\n         ) %>% \r\n    group_by(ZONAS) \r\n\r\n#checking the class of every column\r\nsapply(var_ind, class)\r\n\r\n#applying a new class\r\nvar_ind[] <- lapply(var_ind, function(x) as.numeric(as.character(x)))\r\nsjPlot::view_df(var_ind)\r\n\r\n\r\n\r\n\r\ncolnames(var_ind)\r\n\r\n [1] \"ZONAS\"                 \"NSE\"                  \r\n [3] \"TNSE\"                  \"NEDAD\"                \r\n [5] \"TEDAD\"                 \"CUOTA\"                \r\n [7] \"Sexo\"                  \"Edad\"                 \r\n [9] \"Niv_Edu\"               \"Estudiante\"           \r\n[11] \"Edu_Ingr\"              \"Trab_Ingr\"            \r\n[13] \"Religion\"              \"Razon_Bici\"           \r\n[15] \"Razon_Cambio_Cl\"       \"Automovil_Combustible\"\r\n[17] \"Transporte_mas_freq\"  \r\n\r\ncorr_vdem <- var_ind %>% \r\n  select(1:17) %>% \r\n  cor(use = \"pairwise\") %>% \r\n  round(1)\r\nggcorrplot(corr_vdem, type = \"lower\", lab = T, tl.cex = 9, show.legend = F)\r\n\r\n\r\n\r\nPara reducir dimensionalidad y ocuparnos de tener las variables que\r\nson significante vamos a reducir la cantidad de variables\r\nindependientes.\r\nEl nivel de correlación para todas las variables es alta ya que las\r\nvariables son mayormente categóricas. Por eso, solo removemos variables\r\nque presenten una correlación alta para la mayoria de variables y que\r\ntengan una relación explicativa conceptualmente lógica. Es decir, no\r\nconsideramos el TNSE,porque el NSE ya captura el estatus\r\nsocio-económico. TEDAD, NEDAD es reemplazado por la variable continua de\r\nedad para tener mejor ajuste y distribución para el input del modelo (la\r\nedad es algo que se puede medir).\r\nVariables dependientes\r\nLas variables dependientes tienen el proposito de capturar la\r\npercepción pública. Como esto no es algo que se puede\r\nmedir, se requiere el uso de variables latentes, cuales son subvariables\r\nlas que se puede preguntar con mas precisión la opinion de alguien para\r\nuna subcategoria. Es decir, la percepción pública la vamos a medir a\r\ntraves de dos latentes, seriedad de cambio climatico\r\npercibido y preocupación hacia el cambio\r\nclimatico. La manera de capturar la percepción pública sobre el\r\ncambio climatica es visible en la imagen abajo. Nos enfocamos en los\r\ncuadrantes naranjas (las dos latentes de interes). Estas dos latentes\r\nconstituyen de diferentes preguntas en la Encuesta Nacional del\r\n2018.\r\nLa división de la variable\r\n\r\n#create subset of dependent variables\r\nvar_dep <- df_2018_final %>%\r\n          select(P1_MAmb,P2_COD,P3A,P3B,P3C,P3D,P3E,P3F,P4,\r\n                 P17_COD,P19_1,P19_2,P19_3,P19_4,P19_5,P19_6,\r\n                 P19_7,P19_8,P20,P21A,P21B,P21C,\r\n                 P21D,P30)\r\n\r\n\r\n\r\n\r\n#1 to 7\r\n\r\n#no NA values\r\n\r\nunique(var_dep$P1_MAmb)\r\n\r\n[1] 2 4 3 1 5\r\n\r\nunique(var_dep$P2_COD)\r\n\r\n [1]  6  2  5  3  1 13 11  4 88 14  7  8 12  9 99 10\r\n\r\nunique(var_dep$P3A)\r\n\r\n[1] 3 4 5 2 1 8 9\r\n\r\nunique(var_dep$P3B)\r\n\r\n[1] 2 4 3 1 8 5 9\r\n\r\nunique(var_dep$P3C)\r\n\r\n[1] 2 4 3 8 9 1 5\r\n\r\nunique(var_dep$P3D)\r\n\r\n[1] 2 3 8 9 4 1 5\r\n\r\nunique(var_dep$P3E)\r\n\r\n[1] 3 4 2 1 5 8 9\r\n\r\nunique(var_dep$P3F)\r\n\r\n[1] 3 4 5 9 2 1 8\r\n\r\nunique(var_dep$P4)\r\n\r\n[1] 3 1 2 8 9\r\n\r\n\r\n\r\n#17 to 19\r\n\r\n#no NA\r\nunique(var_dep$P17_COD)\r\n\r\n[1]  5  3 88  7 99  6  4  1  2\r\n\r\n#has NA\r\nunique(var_dep$P19_1)\r\n\r\n[1] \"0\" \".\" \"1\"\r\n\r\nunique(var_dep$P19_2)\r\n\r\n[1] \"0\" \".\" \"1\" \"2\"\r\n\r\nunique(var_dep$P19_3)\r\n\r\n[1] \"0\" \".\" \"1\"\r\n\r\nunique(var_dep$P19_4)\r\n\r\n[1] \"0\" \".\" \"1\"\r\n\r\nunique(var_dep$P19_5)\r\n\r\n[1] \"0\" \".\" \"1\"\r\n\r\nunique(var_dep$P19_6)\r\n\r\n[1] \"1\" \"0\" \".\"\r\n\r\nunique(var_dep$P19_7)\r\n\r\n[1] \"0\" \"1\" \".\"\r\n\r\nunique(var_dep$P19_8)\r\n\r\n[1] \"0\" \".\" \"1\"\r\n\r\n#cleaning NAs by putting the \".\" as NA\r\nvar_dep %>% replace_with_na(replace = list(P19_1 = \".\", P19_2= \".\",P19_3=\".\",P19_4=\".\",P19_5=\".\",\r\n                                           P19_6=\".\",P19_7=\".\",P19_8=\".\"))\r\n\r\n# A tibble: 7,601 × 24\r\n   P1_MAmb P2_COD   P3A   P3B   P3C   P3D   P3E   P3F    P4 P17_COD\r\n     <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>   <dbl>\r\n 1       2      6     3     2     2     2     3     3     3       5\r\n 2       4      2     4     4     4     3     4     4     3       3\r\n 3       3      5     3     3     4     8     2     3     3      88\r\n 4       1      3     4     3     4     3     3     3     1       7\r\n 5       3      1     3     3     3     9     4     3     2       7\r\n 6       3      6     3     3     3     8     4     3     3       3\r\n 7       3      1     3     1     2     2     1     3     2       5\r\n 8       3      6     4     4     3     3     4     3     3       3\r\n 9       5      6     4     4     3     4     4     4     2       3\r\n10       3      1     3     4     2     4     3     3     3      88\r\n# … with 7,591 more rows, and 14 more variables: P19_1 <chr>,\r\n#   P19_2 <chr>, P19_3 <chr>, P19_4 <chr>, P19_5 <chr>, P19_6 <chr>,\r\n#   P19_7 <chr>, P19_8 <chr>, P20 <chr>, P21A <chr>, P21B <chr>,\r\n#   P21C <chr>, P21D <chr>, P30 <dbl>\r\n# ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names\r\n\r\n\r\n\r\n#no NA\r\nunique(var_dep$P20)\r\n\r\n[1] \"1\" \".\" \"2\" \"3\" \"9\" \"8\" \"4\"\r\n\r\n#has NA\r\nunique(var_dep$P21A)\r\n\r\n[1] \"4\" \".\" \"3\" \"2\" \"1\" \"8\" \"9\"\r\n\r\nunique(var_dep$P21B)\r\n\r\n[1] \"4\" \".\" \"3\" \"2\" \"1\" \"8\" \"9\"\r\n\r\nunique(var_dep$P21C)\r\n\r\n[1] \"4\" \".\" \"3\" \"2\" \"9\" \"8\" \"1\"\r\n\r\nunique(var_dep$P21D)\r\n\r\n[1] \"4\" \".\" \"3\" \"2\" \"8\" \"1\" \"9\"\r\n\r\n#cleaning NAs by putting the \".\" as NA\r\nvar_dep %>% replace_with_na(replace = list(P21A = \".\", P21B= \".\",P21C=\".\",P21D=\".\"))\r\n\r\n# A tibble: 7,601 × 24\r\n   P1_MAmb P2_COD   P3A   P3B   P3C   P3D   P3E   P3F    P4 P17_COD\r\n     <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>   <dbl>\r\n 1       2      6     3     2     2     2     3     3     3       5\r\n 2       4      2     4     4     4     3     4     4     3       3\r\n 3       3      5     3     3     4     8     2     3     3      88\r\n 4       1      3     4     3     4     3     3     3     1       7\r\n 5       3      1     3     3     3     9     4     3     2       7\r\n 6       3      6     3     3     3     8     4     3     3       3\r\n 7       3      1     3     1     2     2     1     3     2       5\r\n 8       3      6     4     4     3     3     4     3     3       3\r\n 9       5      6     4     4     3     4     4     4     2       3\r\n10       3      1     3     4     2     4     3     3     3      88\r\n# … with 7,591 more rows, and 14 more variables: P19_1 <chr>,\r\n#   P19_2 <chr>, P19_3 <chr>, P19_4 <chr>, P19_5 <chr>, P19_6 <chr>,\r\n#   P19_7 <chr>, P19_8 <chr>, P20 <chr>, P21A <chr>, P21B <chr>,\r\n#   P21C <chr>, P21D <chr>, P30 <dbl>\r\n# ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names\r\n\r\n#no NA\r\nunique(var_dep$P30)\r\n\r\n[1] 3 2 1 9\r\n\r\nAhora que he limpiado todos los datos, en orden para obtener la\r\npreocupación pública decido sumar las respuestas de los encuestados.\r\nPara que esto sea posible, voy a sumar las respuestas a lo que llamo el\r\nperception score. Mientras mas alto sea este perception\r\nscore, mas alto sera la preocupación y seriedad percibida. Para realizar\r\nesto hay que normalizar todos los valores de todas las preguntas en la\r\nsiguiente forma:\r\n0 - No responde, No disponible\r\n1 - No importante\r\n2 - No tan importante\r\n3 - Neutral\r\n4 - Importante\r\n5 - Muy importante\r\nEs importante entender que todas las preguntas tienen otro\r\nformato y no todos indican relevancia hacia el medio ambiente directa.\r\nEsto es claramente una limitación. Sin embargo, asumimos que es la\r\nasumción es valida ya que indirectamente un número mas bajo en las\r\npreguntas codificadas se relaciona con acciones, y percepciones menos\r\nenfocadas hacia el medio ambiente. Donde este no sea el caso,\r\nme ocupo manualmente de cambiar el formato en algo que concuerde con el\r\nformato para el perception score mencionado arriba. Ya esto forma la\r\nprimera base útil para el modelo.\r\nP1_Mambm: 1 a 5 -> 5 (=1) a 1 (=5)\r\nP3;A-F: 1 a 5 -> 5 (=1) a 1 (=5), 8 (=0), 9 (=0)\r\nP4: 1 a 3 -> 1 (=1), 2 (=3), 3 (=5), 8 (=0), 9 (=0)\r\nP19;1-7: 0 a 1 -> 0 (=1), 1 (=5)\r\nP19;8: 0 a 1 -> 0 (=5), 1 (=1)\r\nP20: 1 a 4 -> 4 (=1), 3 (=5), 2 (=3), 1 (=4), 8 (=0), 9 (=0)\r\nP21;A-D: 1 a 5 -> 1 (=1) a 5 (=5), 8 (=0), 9 (=0)\r\nP30: 1 a 3 -> 1 (=5), 2 (=3), 3 (=1), 9 (=0)\r\nExcepciones: * P2_COD tiene que ser una variable dependiente\r\nseparada, porque calcula la percepción del cambio climatico en terminos\r\nno-cuantitativos. Ve la diferencia en percepcion, y no la preocupación o\r\nrelevancia. * P17_COD tiene que ser una variable dependiente separada,\r\nporque calcula la percepción del cambio climatico en terminos\r\nno-cuantitativos. Ve la diferencia en percepcion, y no la preocupación o\r\nrelevancia.\r\nComo trataremos a estas excepciones se vera luego.\r\n\r\n\r\n#Normalizing input values\r\n\r\n\r\n\r\n\r\n#summing up all the columns to make the variable perception score\r\n# var_dep %>%\r\n#   score_perc = rowSums(select(everything()))\r\n \r\n# var_dep$percepcion_score <- rowSums(var_dep[,c(1,2,3,4,5,6,7,8,9,30)],na.rm=TRUE)\r\n\r\n# var_dep %>%\r\n#   mutate(score_perc = rowSums(var_dep[,1:28]), \r\n#         na.rm = TRUE)\r\n\r\n\r\nConstrucción de modelo\r\nINSERT\r\nIterativamente haré lo siguiente:\r\nFormular una pregunta\r\nCrear un subset de los datos\r\nLimpiar los datos\r\nAnálisis de indicadores usando plots (ggplots)\r\nAplicar metodo multidimensional\r\nColectar resultados\r\nValidacion de hipotesis usando metodos estadisticos\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-10-05-exploracin-de-datos/exploracin-de-datos_files/figure-html5/unnamed-chunk-21-1.png",
    "last_modified": "2022-10-13T10:41:36-03:00",
    "input_file": "exploracin-de-datos.knit.md"
  },
  {
    "path": "posts/2022-09-14-iteracion-2-formulando-pregunta-de-investigacion/",
    "title": "Iteración 2: Pregunta de investigacion",
    "description": "Formulando mi pregunta de investigación final. Describo la relación que se modela usando la estadistica.",
    "author": [
      {
        "name": "Farley Rimon",
        "url": {}
      }
    ],
    "date": "2022-09-14",
    "categories": [],
    "contents": "\r\ní é á\r\nIntroducción\r\nEl cambio climatico a venido a convertirse en un tema importante\r\nglobalmente. La sociedad contemporeana enfrenta un desafio importante\r\nque podria determinar como nuestro futuro se vera, el cambio climatico\r\nantropogenico. El cambio climatico esta definido como el cambio en largo\r\nplazo de temperaturas y los patrones climaticos (UN, 2021). El cambio\r\nclimatico antropogenico es negativo porque puede cambiar nuestro estilo\r\nde vivir. Ya en Chile y Brasil vemos como en los ultimas dos decadas se\r\nexperienció una sequía extrema. Estudios predicen que el cambio\r\nclimático en Latino America no solo afectará los recursos hidrológicos\r\npara consumo de agua, pero tambien afectará el sector agricultural y el\r\nsector hidroeléctrico (Arias et al. 2020;Delgado et al., 2015; IEA,\r\n2020).\r\nEl cambio climatico es mayormente causado por las emisiones de gases\r\n(o emisiones) que retienen el calor solar en nuestro planeta. Estas\r\nemisiones de gases son mayormente consecuencia directa del uso de\r\nrecursos de combustibles fósiles, i.e., recursos esenciales para la\r\neconomia contemporanea.\r\nPara contrarestar este cambio climatico antropogenico,desde 1992 se\r\nhan firmado varias cumbres globales con el proposito de regular (y\r\nreducir) el impacto antropogénico via emisiones al cambio climatico. El\r\nacuerdo mas importante hasta ahorita ha sido el Paris Agreement\r\n(2015) al cual se unieron no mas que ‘193\r\npaises’!\r\nEl viaje a formulacion de politicas para\r\nreducir emisionesTambien en Chile (y Latino America) la situacion de emisiones es\r\ncritica. En Santiago es evidente con la cantidad de smog que hay atrasa\r\nseveramente la salud ambiental y de las personas, posiblemente con\r\nconsecuencias a largo plazo. En la imagen podemos ver que Chile en el\r\n2014 queda en segundo lugar como emitor de gases de invernadero per\r\ncapita. Cuando vemos el tiempo transcurrir entre 2008 y 2018 vemos que\r\nlas emisiones han subido con un 23.8 %. En conclusión, las politicas\r\nparecen no tener efecto para mejorar las emisiones.\r\nLas emisiones CO2 de Chile per capita en\r\ncifras (Banco Mundial,2014)Las emisiones CO2 de Chile total por ano\r\n(Statista, 2018)Investigación inicial\r\nEsto plantea la pregunta de investigación: Ha tenido un efecto\r\npositivo la politica chilena a la polución causada por gases de\r\ninvierno? Para entender su efecto hay que concretar que politicas\r\nambientales han sido implementadas. Esto fue dificil, ya que en varias\r\nocaciones se hablan de metas, pero no de politicas públicas. En la\r\nsiguiente visión general esto se aclara:\r\n2017: Implementacion impuestos verdes de US$5 por tonelada CO2\r\neq.\r\n2018: Plan de Adaptación del Sector Energía\r\n2017-2022: Plan de Acción Nacional de Cambio Climático\r\n2017-2022\r\n2019: El Gobierno se comprometió en 2019 cerrar todas las centrales\r\nde Carbón en Chile al 2040. En 2019 cerraron 4. En 2021 cerraron 4 mas.\r\nEn total hay 28. (Energia, 2021)\r\n2019: Relac en todo Latino America; el 70% de la\r\ngeneración eléctrica en esta parte del mundo sea generada con fuentes de\r\nenergía renovable para el año 2030. Para Chile seria un\r\nmaximo de 95 millones de toneladas de gases de efecto\r\ninvernadero para 2030.\r\nTras analizar el contexto mejor descubrí que el proceso para\r\nconvertir estas politicas en variables operacionales requiere usar de la\r\nmetodologia, Natural Language Processing. La desventaja de este metodo\r\nes que es complicado y requiere un gran montante de datos para que\r\nfuncione correctamente. Al buscar documentos gobernamentales, se\r\ndescubre que se discuten mucho los objetivos de regulaciones sin definir\r\nla regulacion concretamente. Los objetivos son repetidos. Las\r\nregulaciones se definen regionalmente. Politicas que aplican en\r\nla región metropolitana no siempre aplican en otro lugar de\r\nChile. Es decir, minimizar el scope de la investigacion a base\r\nde industria o comuna, requiere mas datos. Mantener el high-level\r\nscope de la investigacion actual, requiere entender cuales\r\ninferencias se pueden hacer. Las dos opciones tienen un alto nivel de\r\ncomplexidad por la falta de datos o la interconexion de inferencias\r\ncausales. Es por esta razón que se ha tenido que iterar en la\r\ninvestigacion.\r\nEs mas, en la ultima decada ya se experenciarion desastres naturales\r\nirregulares. Aunque no sea definido causal, muchos factores apuntan a\r\nque la causa es el cambio climatico para los siguientes\r\nacontecimientos:\r\nEl 2019 es el noveno año consecutivo con temperaturas sobre el\r\npromedio en Chile.\r\nEl 2019 tuvo un déficit promedio de 23% y es el segundo año más seco\r\ndesde 1981.Las localidades con mayores déficits de precipitaciones se\r\nencuentran entre las regiones de Coquimbo hasta Biobío, con un promedio\r\nde -70%.\r\nEn el periodo 2010-2019 se registraron 64 eventos de olas de calor.\r\nEl 2019 hubo un récord de 13 olas de calor en Santiago.\r\nAunque no toda la erosión se produce por el cambio climático, playas\r\ncomo Hornitos (Antofagasta) o Algarrobo (Valparaíso) muestran u\r\nretroceso de más de 2 metros promedio al año.\r\nEn el contexto de las imagenes, entendemos que se puede hablar de una\r\ncrisis medio ambiental en Chile. Una crisis que para cada region es\r\npercibida diferente. En combinación con las cumbres firmadas, supongo\r\nque la percepción sobre la relevancia y los riesgos del cambio climatico\r\ncambia. Los cambios climaticos aumentan las catastrofes experenciadas y\r\npor esto la percepcion de riesgo. Las cumbres aumentan la conciencia\r\nsobre la relevancia del cambio climatico.\r\nUna\r\nformulacion nueva: percepcion pública sobre la importancia del medio\r\nambiente\r\nHipotesis\r\nEn esta investigación queremos concretar los efectos que tiene el\r\ncambio climatico a la percepcion publica. Concretamente se define la\r\nhipotesis como: El aumento de temperatura maxima anual y el\r\naumento de desastres naturales (especificamente, sequia y exceso de\r\nlluvia) afecta negativamente la percepción pública sobre el riesgo del\r\ncambio climático.\r\nVariable independiente: cambios de temperatura máxima y\r\nprecipitación anual.\r\nVariable dependendiente: percepcion publica sobre el riesgo del\r\ncambio climatico.\r\nPrimero que proceder, hay que entender que dice el contexto academico\r\nsobre la relación entre cambios climaticos, cumbres y percepcion\r\npública.\r\nHansen et al. (2012) encuentra que las temperaturas extremas no se\r\npueden explicar por eventos de cambio climatico naturales (ejemplo La\r\nNiña aumentando la sequía y temperatura), indicando una causa\r\nantropogenica.\r\nSchneiderbauer et al. (2021) encuentra que la percepción de riesgo\r\nsobre el cambio climatico es dependiente de experiencas personales,\r\neducación, ingreso y ocupación. Sin embargo, puede ser efecto de\r\nrandomización. Solo un aumento en educación parece estar\r\nrelacionado con un aumento en riesgo sobre cambio climatico.\r\nBagarinao (2016) tambien confirma esto. En otros casos, ocupación y\r\nlocación espacial determina tu vulnerabilidad a peligros naturales. Por\r\nejemplo, un granjero en el desierto de Atacama percibe la sequía como\r\nriesgo, mientras un ciudadano de Santiago percibe la polución como\r\nriesgo del cambio climatico.\r\nSchneiderbauer et al. (2021) tambien encuentra que la percepción de\r\nriesgo es dependiente de factores específicos para un contexto. Es\r\nimportante tener esto en cuenta, ya que puede ser la causa de\r\naleoteridad en los resultados de la investigación.\r\nBagarinao (2016) encuentra que los medios de información entre gente\r\neducada y no-educada afecta el riesgo de percepción. En varios casos se\r\nencuentra una correlacion negativa entre nivel de educacion y\r\nfamiliaridad con planes locales comunitarios contra cambio\r\nclimatico.\r\nUN (2021) conduciendo una encuesta global sobre el medio ambiente,\r\nencuentra que la diferencia en percepción basado en edad se puede\r\nignorar. Tambien se encuentra que las politicas mas populares apoyan la\r\nconservación de naturaleza y aumento en energía renovable. Es decir, ya\r\nse entiende que no se debe investigar una diferencia en percepción para\r\neste tema.\r\nUltimamente Bakaki y Bernauer (2017) encuentran que las\r\nnoticias sobre cumbres globales no afectan la percepción sino la\r\nconciencia sobre el cambio climatico.\r\nEntendiendo esta teoría se puede construír un modelo que cuadre con\r\nel concepto teórico. Esto facilita el proceso de entender los resultados\r\nde la investigación.\r\nVista general de datos\r\nYa que estamos construyendo un data-driven model es\r\nimportante entender que contienen nuestros datos para determinar su\r\nrelevancia para el uso del modelo. Se decidió combinar las percepciones\r\npúblicas a traves de la Encuesta\r\nNacional del Medio Ambiente producido por el Ministerio del Medio\r\nAmbiente, con la base de datos de Registro\r\nHistorico de Estadisticas Ambientales en Chile producido por el\r\nInstituto Nacional de Estadisticas.\r\nEn el siguiente blog se concretará como conducir esta investigación,\r\ncual a su vez determina que modelos y metodos estadísticos seran\r\nusados.\r\nBibliografía\r\nArias, M. E., Farinosi, F., Lee, E., Livino, A., Briscoe, J., &\r\nMoorcroft, P. R. (2020). Impacts of climate change and deforestation on\r\nhydropower planning in the Brazilian Amazon. Nature Sustainability,\r\n3(6), 430-436.\r\nBagarinao, R. T. (2016). Households’ Natural Disaster Preparedness: A\r\nView from a Second Class Municipality in a Developing Country.\r\nEnvironmentAsia, 9(2).\r\nBakaki, Z., & Bernauer, T. (2017). Do global climate summits\r\ninfluence public awareness and policy preferences concerning climate\r\nchange?. Environmental Politics, 26(1), 1-26.\r\nBollettino, V., Alcayna-Stevens, T., Sharma, M., Dy, P., Pham, P.,\r\n& Vinck, P. (2020). Public perception of climate change and disaster\r\npreparedness: Evidence from the Philippines. Climate Risk Management,\r\n30, 100250.\r\nDelgado, L., Torres Gómez, M., Tironi, A., & Marín, V. (2015).\r\nEstrategia de adaptación local al cambio climático para el acceso\r\nequitativo al agua en zonas rurales de Chile.\r\nIEA (2021), Climate Impacts on Latin American Hydropower, IEA, Paris\r\nhttps://www.iea.org/reports/climate-impacts-on-latin-american-hydropower\r\nSchneiderbauer, S., Pisa, P. F., Delves, J. L., Pedoth, L., Rufat,\r\nS., Erschbamer, M., & Granados-Chahin, S. (2021). Risk perception of\r\nclimate change and natural hazards in global mountain regions: A\r\ncritical review. Science of the total environment, 784, 146957.\r\nUN,\r\n2021; What is climate change\r\nCR2,\r\n2014; Emisiones latino america per capita\r\nStatista,\r\n2019; Emisiones de paises Latino Americanos\r\nGobierno\r\nde Chile, 2021; Cierre de Centrales de carbon\r\nWorld’s\r\nlargest survey of public opinion on climate change: a majority of people\r\ncall for wide-ranging action\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-10-06T12:04:44-03:00",
    "input_file": "iteracion-2-formulando-pregunta-de-investigacion.knit.md"
  },
  {
    "path": "posts/2022-08-25-formulando-la-pregunta-de-investigacin/",
    "title": "Formulando la pregunta de investigación",
    "description": "En este post describo mi tema de interes y las variables disponible para este analisis. Esta sera la base de mi investigación para ICP5006.",
    "author": [
      {
        "name": "Farley Rimon",
        "url": {}
      }
    ],
    "date": "2022-08-25",
    "categories": [],
    "contents": "\r\nIntroducción\r\nLa sociedad contemporeana enfrenta un desafio importante que podria\r\ndeterminar como nuestro futuro se vera, el cambio climatico\r\nantropogenico. El cambio climatico esta definido como el cambio en largo\r\nplazo de temperaturas y los patrones climaticos (UN, 2021). El cambio\r\nclimatico antropogenico es negativo porque puede cambiar el ecosistema a\r\nuno con recursos escarcos, biodiversidad reducida, probalidad\r\nincrementada de hazards naturales, y mas. Todos estas fenomenas haran el\r\nvivir en este planeta como lo conocemos mas dificil. El cambio climatico\r\nantropogenico tendra consecuencias sociales de gran magnitud.\r\nEl cambio climatico es mayormente causado por las emisiones de gases\r\n(o emisiones) que retienen el calor solar en nuestro planeta. Estas\r\nemisiones de gases son mayormente consecuencia directa del uso de\r\nrecursos de combustibles fósiles, i.e., recursos esenciales para la\r\neconomia contemporanea.\r\nPara contrarestar este cambio climatico antropogenico, diferentes\r\ngobiernos alrededor del mundo han firmado varios acuerdos desde 1992\r\npara mitigar el cambio climatico. El acuerdo mas importante hasta\r\nahorita ha sido el Paris Agreement (2015) al cual se\r\nunieron no mas que ‘193 paises’! El proposito es tener\r\nuna meta para la regulacion local de emisiones.\r\nEl viaje a formulacion de politicas para\r\nreducir emisionesTambien en Chile (y Latino America) la situacion de emisiones es\r\ncritica. En Santiago es evidente con la cantidad de smog que hay atrasa\r\nseveramente la salud ambiental y de las personas, posiblemente con\r\nconsecuencias a largo plazo. En la imagen podemos ver que Chile en el\r\n2014 queda en segundo lugar como emitor de gases de invernadero per\r\ncapita.\r\nLas emisiones CO2 de Chile per capita en\r\ncifras (Banco Mundial,2014)Cuando vemos el tiempo transcurrir entre 2008 y 2018 vemos que las\r\nemisiones han subido con un 23.8 %. Esto plantea la pregunta politica:\r\n### Ha tenido efecto la politica chilena a la polucion causada por\r\ngases de invierno?\r\n Para\r\ncualitativamente contestar esta pregunta hay que entender que politicas\r\nambientales el gobierno Chileno ha introducido desde 1990 (fin de la\r\ndemocracia). Estas se pueden sumarizar a base de las metas y politicas\r\npropuestas. Es importante notar que hay una distincion entre la politica\r\ny su efecto. Por esta misma razon, se vuelve interesante evaluar el\r\nefecto agregado de la politica a las emisiones. Asi que, que las\r\nsiguientes politicas han sido introducidas:\r\nFalta informacion de primero que esto….\r\n2017: Implementacion impuestos verdes de US$5 por tonelada CO2\r\neq.\r\n2018: Plan de Adaptación del Sector Energía\r\n2017-2022:Plan de Acción Nacional de Cambio Climático 2017-2022\r\n2019: El Gobierno se comprometió en 2019 cerrar todas las centrales\r\nde Carbón en Chile al 2040. En 2019 cerraron 4. En 2021 cerraron 4 mas.\r\nEn total hay 28. (Energia, 2021)\r\n2019: Relac en todo Latino America; el 70% de la\r\ngeneración eléctrica en esta parte del mundo sea generada con fuentes de\r\nenergía renovable para el año 2030. Para Chile seria un\r\nmaximo de 95 millones de toneladas de gases de efecto\r\ninvernadero para 2030.\r\nTema de enfoque\r\nDependiendo de la base de datos disponibles puedo determinar cual mi\r\nenfoque sera. El enfoque principal es en ‘datos politicos’. En este se\r\ninterpreta: * Politica y polucion: Enfocarse en la dinamica a\r\ntraves del tiempo entre cambios politicos y la polucion en diferentes\r\npartes del ecosistema (agua, aire).\r\nVariables operacionales\r\nEmisiones en CO2 equivalentes\r\n\r\nPorcentage de Urbanizacion\r\n\r\nPorcentage de Agricultura\r\n\r\nConsumo energetico\r\n\r\nGeneracion energetica (no-renovable, o renovable)\r\n\r\nEstatus socio-economico de la poblacion\r\n\r\nAcuerdos internacionales/ Cumbres\r\n\r\nCambio de partido politico\r\n\r\nGobernancia de legislicacion\r\n\r\nCambios electorales\r\n\r\nInclinacion democratica del gobierno\r\n\r\nPara esto he encontrado varios bases de datos:\r\nRegistro de\r\nEmisiones y Transferencias de Contaminantes (RETC)\r\nWorld Bank Data\r\npara Chile\r\nOCHA\r\nUN de Chile para indicadores ecologicos\r\nEmisiones\r\nde Chile segun el Banco Mundial Chile\r\nHipotesis\r\nMi hipotesis es la siguiente: Las emisiones tienen\r\nuna relacion debil con el cambio de politica\r\nSubhipotesis: a) Dependiendo de la industria el efecto de la\r\npolitica es mas fuerte o menos fuerte.\r\nArgumentos:\r\nViendo que las emisiones siguien subiendo en Chile, es la pregunta si\r\nestas politicas han tenido efecto.\r\nReferencias\r\nUN,\r\n2021; What is climate change\r\nCR2,\r\n2014; Emisiones latino america per capita\r\nStatista,\r\n2019; Emisiones de paises Latino Americanos\r\nGobierno\r\nde Chile, 2021; Cierre de Centrales de carbon\r\nDistill is a publication format for scientific and technical writing,\r\nnative to the web.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-10-06T12:02:56-03:00",
    "input_file": "formulando-la-pregunta-de-investigacin.knit.md"
  },
  {
    "path": "posts/2022-08-19-week-1/",
    "title": "Semana 1 de teoria",
    "description": "Experiencia de la primera semana",
    "author": [
      {
        "name": "Farley Rimon",
        "url": "https://example.com/norajones"
      }
    ],
    "date": "2022-08-19",
    "categories": [],
    "contents": "\r\nSo far, struggling a little\r\nbit\r\nThings tend to go slow for several reasons:\r\n\r\nI just want to get started with the projects!\r\n\r\nProgram interface (to zoom or not to zoom?)\r\nDisbalance in student expertise\r\nI just want to get started with the projects!Or the hardcore\r\n(new) theory. I believe reviewing old material is to be done in\r\nsomeone’s own time. Well, that’s how my uni went so I am used to the\r\nstress hahaha. It is also just part of my natural character. Because of\r\nthis, I am excited for what is to come…\r\nFinished taller de R\r\nExperience: + Not very different to Python + Need to get used to the\r\nsyntax + Actually pretty easy to use. The interface is insanely simple +\r\nI am scared some solutions I will not know because of a lack of\r\ndominance of R. Hopefully we can help each other with\r\nthis.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-10-06T12:24:06-03:00",
    "input_file": "week-1.knit.md"
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to ICP5006 Blog of Farley Rimon",
    "description": "Welcome to our new blog, ICP5006 Blog of Farley Rimon. Here you can keep track of the progress made during the course. I will document my     opinion on findings about projects related to urban data analysis.",
    "author": [
      {
        "name": "Farley Rimon",
        "url": {}
      }
    ],
    "date": "2022-08-19",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-08-23T09:34:07-04:00",
    "input_file": {}
  }
]
