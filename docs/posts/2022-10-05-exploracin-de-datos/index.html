<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>ICP5006 Progress Blog: Exploración de datos</title>

<meta property="description" itemprop="description" content="Explorando"/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2022-10-05"/>
<meta property="article:created" itemprop="dateCreated" content="2022-10-05"/>
<meta name="article:author" content="Farley Rimon"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="ICP5006 Progress Blog: Exploración de datos"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Explorando"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="ICP5006 Progress Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="ICP5006 Progress Blog: Exploración de datos"/>
<meta property="twitter:description" content="Explorando"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Exploración de datos"]},{"type":"character","attributes":{},"value":["Explorando"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Farley Rimon"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":[]}},"value":[]}]}]},{"type":"character","attributes":{},"value":["2022-10-05"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["data/~$riables latentes pre-analisis.docx","data/~$variables_dep.xlsx","data/Base-en-excel-Encuesta-Nacional-de-Medio-Ambiente-2018.xlsx","data/Base-en-excel_2016/Base en excel/1. ENMA - Cuestionario Final.pdf","data/Base-en-excel_2016/Base en excel/2. ENMA - Tarjetero Final.pdf","data/Base-en-excel_2016/Base en excel/3. ENMA - Libro de Códigos.pdf","data/Base-en-excel_2016/Base en excel/5. ENMA - BBDD Final.xlsx","data/Base_en_SAV_Encuesta_de_Medio_Ambiente_2016.sav","data/Base_en_SAV_Encuesta_Medio_Ambiente_2015.sav","data/Base_en_SAV_Primera_Encuesta_Nacional_de_Medio_Ambiente_2014.sav","data/Overview data 2.xlsx","data/Overview data.xlsx","data/Variables latentes pre-analisis.docx","data/variables_dep.xlsx","data/vdem_subset.rds","exploracin-de-datos_files/anchor-4.2.2/anchor.min.js","exploracin-de-datos_files/bowser-1.9.3/bowser.min.js","exploracin-de-datos_files/distill-2.2.21/template.v2.js","exploracin-de-datos_files/figure-html5/unnamed-chunk-17-1.png","exploracin-de-datos_files/figure-html5/unnamed-chunk-18-1.png","exploracin-de-datos_files/figure-html5/unnamed-chunk-21-1.png","exploracin-de-datos_files/header-attrs-2.15/header-attrs.js","exploracin-de-datos_files/jquery-3.6.0/jquery-3.6.0.js","exploracin-de-datos_files/jquery-3.6.0/jquery-3.6.0.min.js","exploracin-de-datos_files/jquery-3.6.0/jquery-3.6.0.min.map","exploracin-de-datos_files/kePrint-0.0.1/kePrint.js","exploracin-de-datos_files/lightable-0.0.1/lightable.css","exploracin-de-datos_files/popper-2.6.0/popper.min.js","exploracin-de-datos_files/tippy-6.2.7/tippy-bundle.umd.min.js","exploracin-de-datos_files/tippy-6.2.7/tippy-light-border.css","exploracin-de-datos_files/tippy-6.2.7/tippy.css","exploracin-de-datos_files/tippy-6.2.7/tippy.umd.min.js","exploracin-de-datos_files/webcomponents-2.0.0/webcomponents.js","images/variables latentes.jpg"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      if ($(this).children()[0].nodeName == "D-FOOTNOTE") {
        var fn = $(this).children()[0]
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.15/header-attrs.js"></script>
  <script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Exploración de datos","description":"Explorando","authors":[{"author":"Farley Rimon","authorURL":{},"affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-10-05T00:00:00.000-03:00","citationText":"Rimon, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">ICP5006 Progress Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Exploración de datos</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Explorando</p></p>
</div>

<div class="d-byline">
  Farley Rimon true 
  
<br/>2022-10-05
</div>

<div class="d-article">
<h1 id="limpiando-el-database">Limpiando el database</h1>
<p>Primero, cargaremos los paquetes que utilizaremos en esta sesión:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://strengejacke.github.io/sjmisc/'>sjmisc</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://haven.tidyverse.org'>haven</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://haozhu233.github.io/kableExtra/'>kableExtra</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://readxl.tidyverse.org'>readxl</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://docs.ropensci.org/skimr/'>skimr</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://strengejacke.github.io/sjPlot/'>sjPlot</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/njtierney/naniar'>naniar</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.sthda.com/english/wiki/ggcorrplot'>ggcorrplot</a></span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Y cargaremos la base de datos con variables ya seleccionadas:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>df_2014</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_sav</a></span><span class='op'>(</span><span class='st'>"data/Base_en_SAV_Primera_Encuesta_Nacional_de_Medio_Ambiente_2014.sav"</span><span class='op'>)</span></span>
<span><span class='va'>df_2015</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_sav</a></span><span class='op'>(</span><span class='st'>"data/Base_en_SAV_Encuesta_Medio_Ambiente_2015.sav"</span><span class='op'>)</span></span>
<span><span class='va'>df_2016</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_sav</a></span><span class='op'>(</span><span class='st'>"data/Base_en_SAV_Encuesta_de_Medio_Ambiente_2016.sav"</span><span class='op'>)</span></span>
<span><span class='va'>df_2018</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_excel</a></span><span class='op'>(</span><span class='st'>"data/Base-en-excel-Encuesta-Nacional-de-Medio-Ambiente-2018.xlsx"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Es importante mencionar que algunas preguntas están doble. Como
pregunta abierta, y luego fueron codificadas a base de respuestas
similares.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>skimr</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>df_2018</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>skimr</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>df_2016</span><span class='op'>)</span></span>
<span><span class='fu'>sjPlot</span><span class='fu'>::</span><span class='fu'><a href='https://strengejacke.github.io/sjPlot/reference/view_df.html'>view_df</a></span><span class='op'>(</span><span class='va'>df_2016</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df_2016</span><span class='op'>)</span><span class='op'>)</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/prod.html'>prod</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>df_2016</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>*</span><span class='fl'>100</span></span></code></pre>
</div>
<pre><code>[1] 2.236765</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>skimr</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>df_2015</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df_2015</span><span class='op'>)</span><span class='op'>)</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/prod.html'>prod</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>df_2015</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>*</span><span class='fl'>100</span></span></code></pre>
</div>
<pre><code>[1] 35.43604</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>skimr</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>df_2014</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df_2014</span><span class='op'>)</span><span class='op'>)</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/prod.html'>prod</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>df_2014</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>*</span><span class='fl'>100</span></span></code></pre>
</div>
<pre><code>[1] 31.38757</code></pre>
</div>
<p>Vemos que la cantidad de datos faltantes es poca para el 2016, un 2%
de la base.2014 y 2015 ya tienen mas del 30% de datos faltantes. Si
ocurre en solo unas de las columnas, se pueden remover de la base para
tener una base de datos limpia. Para eso usamos la funcion sort:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colSums</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>df_2016</span>, <span class='va'>is.na</span><span class='op'>)</span> <span class='op'>)</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>     P50B      P11A      P11B      P11C      P11D      P11E      P11F 
     1921      1753      1753      1753      1753      1753      1753 
    P47_A       P48       P49       P50    INICIO   TERMINO     fecha 
      716       716       716       716       631       598       163 
     P17F      P17J     FOLIO    COMUNA    region macrozona 
        1         1         0         0         0         0 </code></pre>
</div>
<p>Vemos que son 14 columnas con datos faltantes para el 2016. De 2170
observaciones, falta más de el 25% (598/2170*100%= 27.2%) de los datos
para los indicadores. Removemos todas las columnas que le falten mas de
15% de las observaciones. En vez de observar cuales columnas tiene mas
de 15% en el 2015 y 2014, removemos las columnas directamente ya que no
son útiles en todo caso.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>df_2016_final</span> <span class='op'>&lt;-</span> <span class='va'>df_2016</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colMeans</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df_2016</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>&lt;=</span> <span class='fl'>.15</span><span class='op'>]</span></span>
<span><span class='va'>df_2015_final</span> <span class='op'>&lt;-</span> <span class='va'>df_2015</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colMeans</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df_2015</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>&lt;=</span> <span class='fl'>.15</span><span class='op'>]</span></span>
<span><span class='va'>df_2014_final</span> <span class='op'>&lt;-</span> <span class='va'>df_2014</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colMeans</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df_2014</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>&lt;=</span> <span class='fl'>.15</span><span class='op'>]</span></span></code></pre>
</div>
</div>
<p>El siguiente Excel ofrece una descripción de la base de datos de las
encuestas.</p>
<p>Primero la data era la siguiente.</p>
<div class="layout-chunk" data-layout="l-body">
<div
style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:100%; ">
<table class="table table-striped" style="font-family: Roboto Condensed; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Año encuesta
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Observaciónes
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Preguntas
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
% Datos faltantes
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Tipos caracter
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Tipos numéricos
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Tipos fecha
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Tipos difftime
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2cm; border-left:1px solid;">
2014
</td>
<td style="text-align:center;min-width: 2cm; border-left:1px solid;">
5057
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
89
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
31.90
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
7
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
82
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2cm; border-left:1px solid;">
2015
</td>
<td style="text-align:center;min-width: 2cm; border-left:1px solid;">
5664
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
113
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
35.40
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
12
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
101
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2cm; border-left:1px solid;">
2016
</td>
<td style="text-align:center;min-width: 2cm; border-left:1px solid;">
2170
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
344
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
2.23
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
47
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
294
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
1
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
2
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2cm; border-left:1px solid;">
2018
</td>
<td style="text-align:center;min-width: 2cm; border-left:1px solid;">
7601
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
169
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0.00
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
85
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
84
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>vemos que habian columnas especificas con la mayoria de los datos
faltantes. Las columnas que quedan, juntas, tienen menos del 0.19% con
datos faltantes. Esta fracción del total se puede ignorar. Despues de
limpiar el database, el <em>overview</em> cambia a la siguiente.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df_2016_final</span><span class='op'>)</span><span class='op'>)</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/prod.html'>prod</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>df_2016_final</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>*</span><span class='fl'>100</span></span></code></pre>
</div>
<pre><code>[1] 0.02297186</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df_2015_final</span><span class='op'>)</span><span class='op'>)</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/prod.html'>prod</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>df_2015_final</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>*</span><span class='fl'>100</span></span></code></pre>
</div>
<pre><code>[1] 0.1453809</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>df_2014_final</span><span class='op'>)</span><span class='op'>)</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/prod.html'>prod</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>df_2014_final</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>*</span><span class='fl'>100</span></span></code></pre>
</div>
<pre><code>[1] 0.1862764</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>skimr</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>df_2014_final</span><span class='op'>)</span></span>
<span><span class='fu'>skimr</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>df_2015_final</span><span class='op'>)</span></span>
<span><span class='fu'>skimr</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>df_2016_final</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div
style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:100%; ">
<table class="table table-striped" style="font-family: Roboto Condensed; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Año encuesta
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Observaciónes
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Preguntas
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
% Datos faltantes
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Tipos caracter
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Tipos numéricos
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Tipos fecha
</th>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;">
Tipos difftime
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2cm; border-left:1px solid;">
2014
</td>
<td style="text-align:center;min-width: 2cm; border-left:1px solid;">
5057
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
89
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0.1862764
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
7
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
43
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2cm; border-left:1px solid;">
2015
</td>
<td style="text-align:center;min-width: 2cm; border-left:1px solid;">
5664
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
113
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0.1453809
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
12
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
52
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2cm; border-left:1px solid;">
2016
</td>
<td style="text-align:center;min-width: 2cm; border-left:1px solid;">
2170
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
344
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0.0229719
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
47
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
283
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
1
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2cm; border-left:1px solid;">
2018
</td>
<td style="text-align:center;min-width: 2cm; border-left:1px solid;">
7601
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
169
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0.0000000
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
85
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
84
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
<td style="text-align:center;min-width: 3cm; border-left:1px solid;">
0
</td>
</tr>
</tbody>
</table>
</div>
</div>
<h1 id="encontrando-las-variables-operacionales">Encontrando las
variables operacionales</h1>
<h2 id="encuesta-nacional-del-2018">Encuesta nacional del 2018</h2>
<p>Para simplificar el analisis, decido enfocarme solo en el 2016 y 2018
ya que es el mas completo de los años. A base del 2016 y 2018 decido
cuales van a ser mis variables operacionales para todos los años.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#re-ordering dataframe to have indicators in front</span></span>
<span></span>
<span><span class='va'>df_2018_final</span> <span class='op'>&lt;-</span> <span class='va'>df_2018</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='st'>"ZONAS"</span>, <span class='st'>"ID"</span>, <span class='st'>"COMUNA"</span>, <span class='st'>"NSE"</span>,<span class='st'>"TNSE"</span>,<span class='st'>"NEDAD"</span>,<span class='st'>"TEDAD"</span>,<span class='st'>"REGION"</span>,<span class='st'>"CUOTA"</span>,<span class='st'>"POND"</span>, <span class='va'>P32</span>,<span class='va'>P33</span>,<span class='va'>P34</span>,<span class='va'>P35</span>,<span class='va'>P36</span>,<span class='va'>P37</span>,<span class='va'>P38</span>,<span class='va'>P39</span>, <span class='fu'><a href='https://tidyselect.r-lib.org/reference/everything.html'>everything</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='fu'>sjPlot</span><span class='fu'>::</span><span class='fu'><a href='https://strengejacke.github.io/sjPlot/reference/view_df.html'>view_df</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="exploración-de-variables-independientes">Exploración de
variables independientes</h2>
<p>Primero que escoger mis variables independientes voy a tener que
entender su sesgo y varianca. Tengo mas que nada entender mis datos para
asi tambien entender mis resultados.</p>
<p>Variables socio-económicos y socio-demograficas son:</p>
<ul>
<li><strong>Zonas (macrozona en Chile)</strong></li>
<li>ID (xxxxx)</li>
<li>Comuna (xxxxxxx)</li>
<li><strong>NSE (nivel Soco-Economico)</strong></li>
<li><strong>TNSE (xxxxx)</strong></li>
<li><strong>NEDAD (categórica de edad; 18-34;31-45; 46-60;
61+)</strong></li>
<li><strong>TEDAD (categórica de edad; 18-34; 35-54; 55+)</strong></li>
<li>REGION (16 regiones)</li>
<li><strong>CUOTA (xxxxxx)</strong></li>
<li>POND</li>
<li><strong>P32: Sexo (categórica: Hombre (1); Mujer (0))</strong></li>
<li><strong>P33: Edad (variable continua)</strong></li>
<li><strong>P34: Nivel de educación (categórica del 1-10)</strong></li>
<li><strong>P36: Estudia (categórica: Si(1);No (2))</strong></li>
<li><strong>P37: Nivel de educación con mas aporte al ingreso del hogar
(categórica: 1-10)</strong></li>
<li><strong>P38: Profesión con mas aporte al ingreso del hogar
(categórica: 1-10)</strong></li>
<li><strong>P39: Religión (categórica: 1-9)</strong></li>
<li><strong>P43: Tipo de combustible que usa el vehiculo del encuestado
(categórica: 1-..)</strong></li>
<li><strong>P8: Razón por la que alguien no usa bicicleta (categórica:
1-..)</strong></li>
<li><strong>P18: Opinion de la causa del cambio climatico (categórca:
1-..)</strong></li>
</ul>
<p>De estas solo considero las cursivas. Las cursivas voy a analizar
para multicolineadid y asi reducir las variables independientes usadas
mas.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Rename columns of independent variables</span></span>
<span><span class='va'>df_2018_final</span> <span class='op'>&lt;-</span>  <span class='va'>df_2018_final</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span><span class='st'>'Razon_Bici'</span><span class='op'>=</span> <span class='st'>'P8'</span>,<span class='st'>'Razon_Cambio_Cl'</span><span class='op'>=</span> <span class='st'>'P18'</span>,<span class='st'>'Automovil_Combustible'</span><span class='op'>=</span> <span class='st'>'P43'</span>, <span class='st'>'Sexo'</span><span class='op'>=</span><span class='st'>'P32'</span> ,<span class='st'>'Edad'</span><span class='op'>=</span><span class='st'>'P33'</span> ,<span class='st'>'Niv_Edu'</span><span class='op'>=</span><span class='st'>'P34'</span>,<span class='st'>'Estudiante'</span><span class='op'>=</span><span class='st'>'P36'</span>,<span class='st'>'Edu_Ingr'</span><span class='op'>=</span><span class='st'>'P37'</span>,<span class='st'>'Trab_Ingr'</span><span class='op'>=</span> <span class='st'>'P38'</span>,<span class='st'>'Religion'</span><span class='op'>=</span><span class='st'>'P39'</span>, <span class='st'>'Transporte_mas_freq'</span> <span class='op'>=</span> <span class='st'>'P7'</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>var_ind</span> <span class='op'>&lt;-</span> <span class='va'>df_2018_final</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS</span>, <span class='va'>NSE</span>, <span class='va'>TNSE</span>, <span class='va'>NEDAD</span>, <span class='va'>TEDAD</span>, <span class='va'>CUOTA</span>, <span class='va'>Sexo</span>, <span class='va'>Edad</span>, <span class='va'>Niv_Edu</span>, <span class='va'>Estudiante</span>, <span class='va'>Edu_Ingr</span>, <span class='va'>Trab_Ingr</span>, <span class='va'>Religion</span>, <span class='va'>Razon_Bici</span>,<span class='va'>Razon_Cambio_Cl</span>,<span class='va'>Automovil_Combustible</span>, <span class='va'>Transporte_mas_freq</span></span>
<span>         <span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise_all.html'>summarise_all</a></span><span class='op'>(</span><span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>  <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>x</span>, na.rm <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span></span>
<span>  <span class='co'># na.omit()</span></span></code></pre>
</div>
</div>
<p>Vemos que hay un warning. Vamos a ver cual variable ocasiona estos
warning y porque. Yo pienso que son
Razon_Bici,Razon_Cambio_Cl,Automovil_Combustible. Las ultimas 3
variables tienen un “.”, un dato que se puede considerar NA. Como no se
puede reemplezar lo mejor es imputarlo con el valor que es equivalente a
“No Responde” para estas preguntas, el número <strong>9</strong> para
<em>Razon_Cambio_Cl(P18) y Automovil_Combustible (P43)</em>, el número
<strong>99</strong> para <em>Razon_Bici (P8)</em>. Cambiamos las
columnas a <em>numeric</em> y terminamos. Despues, volvemos a formar un
subset de las variables independientes.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>ZONAS</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>NSE</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>TNSE</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>NEDAD</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>TEDAD</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>CUOTA</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>Sexo</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>Edad</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>Niv_Edu</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>Estudiante</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>Razon_Bici</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>Razon_Cambio_Cl</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>Automovil_Combustible</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>df_2018_final</span><span class='op'>$</span><span class='va'>Transporte_mas_freq</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>df_2018_final</span><span class='op'>[</span><span class='st'>"Razon_Bici"</span><span class='op'>]</span><span class='op'>[</span><span class='va'>df_2018_final</span><span class='op'>[</span><span class='st'>"Razon_Bici"</span><span class='op'>]</span> <span class='op'>==</span> <span class='st'>"."</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"9"</span></span>
<span><span class='va'>df_2018_final</span><span class='op'>[</span><span class='st'>"Razon_Cambio_Cl"</span><span class='op'>]</span><span class='op'>[</span><span class='va'>df_2018_final</span><span class='op'>[</span><span class='st'>"Razon_Cambio_Cl"</span><span class='op'>]</span> <span class='op'>==</span> <span class='st'>"."</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"99"</span></span>
<span><span class='va'>df_2018_final</span><span class='op'>[</span><span class='st'>"Automovil_Combustible"</span><span class='op'>]</span><span class='op'>[</span><span class='va'>df_2018_final</span><span class='op'>[</span><span class='st'>"Automovil_Combustible"</span><span class='op'>]</span> <span class='op'>==</span> <span class='st'>"."</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"99"</span></span>
<span></span>
<span><span class='va'>var_ind</span> <span class='op'>&lt;-</span> <span class='va'>df_2018_final</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS</span>, <span class='va'>NSE</span>, <span class='va'>TNSE</span>, <span class='va'>NEDAD</span>, <span class='va'>TEDAD</span>, <span class='va'>CUOTA</span>, <span class='va'>Sexo</span>, <span class='va'>Edad</span>, <span class='va'>Niv_Edu</span>, <span class='va'>Estudiante</span>, <span class='va'>Edu_Ingr</span>, <span class='va'>Trab_Ingr</span>, <span class='va'>Religion</span>, <span class='va'>Razon_Bici</span>,<span class='va'>Razon_Cambio_Cl</span>,<span class='va'>Automovil_Combustible</span>, <span class='va'>Transporte_mas_freq</span></span>
<span>         <span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span> </span>
<span></span>
<span><span class='co'>#checking the class of every column</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>var_ind</span>, <span class='va'>class</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>#applying a new class</span></span>
<span><span class='va'>var_ind</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>var_ind</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='fu'>sjPlot</span><span class='fu'>::</span><span class='fu'><a href='https://strengejacke.github.io/sjPlot/reference/view_df.html'>view_df</a></span><span class='op'>(</span><span class='va'>var_ind</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>var_ind</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code> [1] &quot;ZONAS&quot;                 &quot;NSE&quot;                  
 [3] &quot;TNSE&quot;                  &quot;NEDAD&quot;                
 [5] &quot;TEDAD&quot;                 &quot;CUOTA&quot;                
 [7] &quot;Sexo&quot;                  &quot;Edad&quot;                 
 [9] &quot;Niv_Edu&quot;               &quot;Estudiante&quot;           
[11] &quot;Edu_Ingr&quot;              &quot;Trab_Ingr&quot;            
[13] &quot;Religion&quot;              &quot;Razon_Bici&quot;           
[15] &quot;Razon_Cambio_Cl&quot;       &quot;Automovil_Combustible&quot;
[17] &quot;Transporte_mas_freq&quot;  </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>corr_vdem</span> <span class='op'>&lt;-</span> <span class='va'>var_ind</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>17</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span><span class='op'>(</span>use <span class='op'>=</span> <span class='st'>"pairwise"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/ggcorrplot/man/ggcorrplot.html'>ggcorrplot</a></span><span class='op'>(</span><span class='va'>corr_vdem</span>, type <span class='op'>=</span> <span class='st'>"lower"</span>, lab <span class='op'>=</span> <span class='cn'>T</span>, tl.cex <span class='op'>=</span> <span class='fl'>9</span>, show.legend <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="exploracin-de-datos_files/figure-html5/unnamed-chunk-21-1.png" width="624" /></p>
</div>
<p>Para reducir dimensionalidad y ocuparnos de tener las variables que
son significante vamos a reducir la cantidad de variables
independientes.</p>
<p>El nivel de correlación para todas las variables es alta ya que las
variables son mayormente categóricas. Por eso, solo removemos variables
que presenten una correlación alta para la mayoria de variables y que
tengan una relación explicativa conceptualmente lógica. Es decir, no
consideramos el TNSE,porque el NSE ya captura el estatus
socio-económico. TEDAD, NEDAD es reemplazado por la variable continua de
edad para tener mejor ajuste y distribución para el input del modelo (la
edad es algo que se puede medir).</p>
<h2 id="variables-dependientes">Variables dependientes</h2>
<p>Las variables dependientes tienen el proposito de capturar la
<strong>percepción pública</strong>. Como esto no es algo que se puede
medir, se requiere el uso de variables latentes, cuales son subvariables
las que se puede preguntar con mas precisión la opinion de alguien para
una subcategoria. Es decir, la percepción pública la vamos a medir a
traves de dos latentes, <strong>seriedad de cambio climatico
percibido</strong> y <strong>preocupación hacia el cambio
climatico</strong>. La manera de capturar la percepción pública sobre el
cambio climatica es visible en la imagen abajo. Nos enfocamos en los
cuadrantes naranjas (las dos latentes de interes). Estas dos latentes
constituyen de diferentes preguntas en la Encuesta Nacional del
2018.</p>
<figure>
<img src="images/variables%20latentes.jpg"
alt="La división de la variable" />
<figcaption aria-hidden="true">La división de la variable</figcaption>
</figure>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#create subset of dependent variables</span></span>
<span><span class='va'>var_dep</span> <span class='op'>&lt;-</span> <span class='va'>df_2018_final</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>          <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>P1_MAmb</span>,<span class='va'>P2_COD</span>,<span class='va'>P3A</span>,<span class='va'>P3B</span>,<span class='va'>P3C</span>,<span class='va'>P3D</span>,<span class='va'>P3E</span>,<span class='va'>P3F</span>,<span class='va'>P4</span>,</span>
<span>                 <span class='va'>P17_COD</span>,<span class='va'>P19_1</span>,<span class='va'>P19_2</span>,<span class='va'>P19_3</span>,<span class='va'>P19_4</span>,<span class='va'>P19_5</span>,<span class='va'>P19_6</span>,</span>
<span>                 <span class='va'>P19_7</span>,<span class='va'>P19_8</span>,<span class='va'>P20</span>,<span class='va'>P21A</span>,<span class='va'>P21B</span>,<span class='va'>P21C</span>,</span>
<span>                 <span class='va'>P21D</span>,<span class='va'>P30</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#1 to 7</span></span>
<span></span>
<span><span class='co'>#no NA values</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P1_MAmb</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 2 4 3 1 5</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P2_COD</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code> [1]  6  2  5  3  1 13 11  4 88 14  7  8 12  9 99 10</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P3A</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 3 4 5 2 1 8 9</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P3B</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 2 4 3 1 8 5 9</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P3C</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 2 4 3 8 9 1 5</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P3D</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 2 3 8 9 4 1 5</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P3E</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 3 4 2 1 5 8 9</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P3F</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 3 4 5 9 2 1 8</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P4</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 3 1 2 8 9</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#17 to 19</span></span>
<span></span>
<span><span class='co'>#no NA</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P17_COD</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1]  5  3 88  7 99  6  4  1  2</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#has NA</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P19_1</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;0&quot; &quot;.&quot; &quot;1&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P19_2</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;0&quot; &quot;.&quot; &quot;1&quot; &quot;2&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P19_3</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;0&quot; &quot;.&quot; &quot;1&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P19_4</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;0&quot; &quot;.&quot; &quot;1&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P19_5</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;0&quot; &quot;.&quot; &quot;1&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P19_6</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;1&quot; &quot;0&quot; &quot;.&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P19_7</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;0&quot; &quot;1&quot; &quot;.&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P19_8</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;0&quot; &quot;.&quot; &quot;1&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#cleaning NAs by putting the "." as NA</span></span>
<span><span class='va'>var_dep</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/pkg/naniar/man/replace_with_na.html'>replace_with_na</a></span><span class='op'>(</span>replace <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>P19_1 <span class='op'>=</span> <span class='st'>"."</span>, P19_2<span class='op'>=</span> <span class='st'>"."</span>,P19_3<span class='op'>=</span><span class='st'>"."</span>,P19_4<span class='op'>=</span><span class='st'>"."</span>,P19_5<span class='op'>=</span><span class='st'>"."</span>,</span>
<span>                                           P19_6<span class='op'>=</span><span class='st'>"."</span>,P19_7<span class='op'>=</span><span class='st'>"."</span>,P19_8<span class='op'>=</span><span class='st'>"."</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 7,601 × 24
   P1_MAmb P2_COD   P3A   P3B   P3C   P3D   P3E   P3F    P4 P17_COD
     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1       2      6     3     2     2     2     3     3     3       5
 2       4      2     4     4     4     3     4     4     3       3
 3       3      5     3     3     4     8     2     3     3      88
 4       1      3     4     3     4     3     3     3     1       7
 5       3      1     3     3     3     9     4     3     2       7
 6       3      6     3     3     3     8     4     3     3       3
 7       3      1     3     1     2     2     1     3     2       5
 8       3      6     4     4     3     3     4     3     3       3
 9       5      6     4     4     3     4     4     4     2       3
10       3      1     3     4     2     4     3     3     3      88
# … with 7,591 more rows, and 14 more variables: P19_1 &lt;chr&gt;,
#   P19_2 &lt;chr&gt;, P19_3 &lt;chr&gt;, P19_4 &lt;chr&gt;, P19_5 &lt;chr&gt;, P19_6 &lt;chr&gt;,
#   P19_7 &lt;chr&gt;, P19_8 &lt;chr&gt;, P20 &lt;chr&gt;, P21A &lt;chr&gt;, P21B &lt;chr&gt;,
#   P21C &lt;chr&gt;, P21D &lt;chr&gt;, P30 &lt;dbl&gt;
# ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#no NA</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P20</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;1&quot; &quot;.&quot; &quot;2&quot; &quot;3&quot; &quot;9&quot; &quot;8&quot; &quot;4&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#has NA</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P21A</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;4&quot; &quot;.&quot; &quot;3&quot; &quot;2&quot; &quot;1&quot; &quot;8&quot; &quot;9&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P21B</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;4&quot; &quot;.&quot; &quot;3&quot; &quot;2&quot; &quot;1&quot; &quot;8&quot; &quot;9&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P21C</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;4&quot; &quot;.&quot; &quot;3&quot; &quot;2&quot; &quot;9&quot; &quot;8&quot; &quot;1&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P21D</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;4&quot; &quot;.&quot; &quot;3&quot; &quot;2&quot; &quot;8&quot; &quot;1&quot; &quot;9&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#cleaning NAs by putting the "." as NA</span></span>
<span><span class='va'>var_dep</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/pkg/naniar/man/replace_with_na.html'>replace_with_na</a></span><span class='op'>(</span>replace <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>P21A <span class='op'>=</span> <span class='st'>"."</span>, P21B<span class='op'>=</span> <span class='st'>"."</span>,P21C<span class='op'>=</span><span class='st'>"."</span>,P21D<span class='op'>=</span><span class='st'>"."</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 7,601 × 24
   P1_MAmb P2_COD   P3A   P3B   P3C   P3D   P3E   P3F    P4 P17_COD
     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1       2      6     3     2     2     2     3     3     3       5
 2       4      2     4     4     4     3     4     4     3       3
 3       3      5     3     3     4     8     2     3     3      88
 4       1      3     4     3     4     3     3     3     1       7
 5       3      1     3     3     3     9     4     3     2       7
 6       3      6     3     3     3     8     4     3     3       3
 7       3      1     3     1     2     2     1     3     2       5
 8       3      6     4     4     3     3     4     3     3       3
 9       5      6     4     4     3     4     4     4     2       3
10       3      1     3     4     2     4     3     3     3      88
# … with 7,591 more rows, and 14 more variables: P19_1 &lt;chr&gt;,
#   P19_2 &lt;chr&gt;, P19_3 &lt;chr&gt;, P19_4 &lt;chr&gt;, P19_5 &lt;chr&gt;, P19_6 &lt;chr&gt;,
#   P19_7 &lt;chr&gt;, P19_8 &lt;chr&gt;, P20 &lt;chr&gt;, P21A &lt;chr&gt;, P21B &lt;chr&gt;,
#   P21C &lt;chr&gt;, P21D &lt;chr&gt;, P30 &lt;dbl&gt;
# ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#no NA</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>var_dep</span><span class='op'>$</span><span class='va'>P30</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 3 2 1 9</code></pre>
</div>
<p>Ahora que he limpiado todos los datos, en orden para obtener la
preocupación pública decido sumar las respuestas de los encuestados.
Para que esto sea posible, voy a sumar las respuestas a lo que llamo el
<strong>perception score</strong>. Mientras mas alto sea este perception
score, mas alto sera la preocupación y seriedad percibida. Para realizar
esto hay que normalizar todos los valores de todas las preguntas en la
siguiente forma:</p>
<ul>
<li>0 - No responde, No disponible</li>
<li>1 - No importante</li>
<li>2 - No tan importante</li>
<li>3 - Neutral</li>
<li>4 - Importante</li>
<li>5 - Muy importante</li>
</ul>
<p><strong>Es importante entender que todas las preguntas tienen otro
formato y no todos indican relevancia hacia el medio ambiente directa.
Esto es claramente una limitación. Sin embargo, asumimos que es la
asumción es valida ya que indirectamente un número mas bajo en las
preguntas codificadas se relaciona con acciones, y percepciones menos
enfocadas hacia el medio ambiente.</strong> Donde este no sea el caso,
me ocupo manualmente de cambiar el formato en algo que concuerde con el
formato para el perception score mencionado arriba. Ya esto forma la
primera base útil para el modelo.</p>
<ul>
<li>P1_Mambm: 1 a 5 -&gt; 5 (=1) a 1 (=5)</li>
<li>P3;A-F: 1 a 5 -&gt; 5 (=1) a 1 (=5), 8 (=0), 9 (=0)</li>
<li>P4: 1 a 3 -&gt; 1 (=1), 2 (=3), 3 (=5), 8 (=0), 9 (=0)</li>
<li>P19;1-7: 0 a 1 -&gt; 0 (=1), 1 (=5)</li>
<li>P19;8: 0 a 1 -&gt; 0 (=5), 1 (=1)</li>
<li>P20: 1 a 4 -&gt; 4 (=1), 3 (=5), 2 (=3), 1 (=4), 8 (=0), 9 (=0)</li>
<li>P21;A-D: 1 a 5 -&gt; 1 (=1) a 5 (=5), 8 (=0), 9 (=0)</li>
<li>P30: 1 a 3 -&gt; 1 (=5), 2 (=3), 3 (=1), 9 (=0)</li>
</ul>
<p>Excepciones: * P2_COD tiene que ser una variable dependiente
separada, porque calcula la percepción del cambio climatico en terminos
no-cuantitativos. Ve la diferencia en percepcion, y no la preocupación o
relevancia. * P17_COD tiene que ser una variable dependiente separada,
porque calcula la percepción del cambio climatico en terminos
no-cuantitativos. Ve la diferencia en percepcion, y no la preocupación o
relevancia.</p>
<p>Como trataremos a estas excepciones se vera luego.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#Normalizing input values</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#summing up all the columns to make the variable perception score</span></span>
<span><span class='co'># var_dep %&gt;%</span></span>
<span><span class='co'>#   score_perc = rowSums(select(everything()))</span></span>
<span> </span>
<span><span class='co'># var_dep$percepcion_score &lt;- rowSums(var_dep[,c(1,2,3,4,5,6,7,8,9,30)],na.rm=TRUE)</span></span>
<span></span>
<span><span class='co'># var_dep %&gt;%</span></span>
<span><span class='co'>#   mutate(score_perc = rowSums(var_dep[,1:28]), </span></span>
<span><span class='co'>#         na.rm = TRUE)</span></span></code></pre>
</div>
</div>
<h1 id="construcción-de-modelo">Construcción de modelo</h1>
<p>INSERT</p>
<p>Iterativamente haré lo siguiente:</p>
<ul>
<li>Formular una pregunta</li>
<li>Crear un subset de los datos</li>
<li>Limpiar los datos</li>
<li>Análisis de indicadores usando plots (ggplots)</li>
<li>Aplicar metodo multidimensional</li>
<li>Colectar resultados</li>
<li>Validacion de hipotesis usando metodos estadisticos</li>
</ul>
<div class="sourceCode" id="cb35"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
