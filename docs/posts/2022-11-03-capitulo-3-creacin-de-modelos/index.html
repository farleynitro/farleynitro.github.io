<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>ICP5006 Progress Blog: Capitulo 3: Creaci贸n de modelos</title>

<meta property="description" itemprop="description" content="A short description of the post."/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2022-11-03"/>
<meta property="article:created" itemprop="dateCreated" content="2022-11-03"/>
<meta name="article:author" content="Farley Rimon"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="ICP5006 Progress Blog: Capitulo 3: Creaci贸n de modelos"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="A short description of the post."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="ICP5006 Progress Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="ICP5006 Progress Blog: Capitulo 3: Creaci贸n de modelos"/>
<meta property="twitter:description" content="A short description of the post."/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Capitulo 3: Creaci贸n de modelos"]},{"type":"character","attributes":{},"value":["A short description of the post."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Farley Rimon"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":[]}},"value":[]}]}]},{"type":"character","attributes":{},"value":["2022-11-03"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["capitulo-3-creacin-de-modelos_files/anchor-4.2.2/anchor.min.js","capitulo-3-creacin-de-modelos_files/bowser-1.9.3/bowser.min.js","capitulo-3-creacin-de-modelos_files/distill-2.2.21/template.v2.js","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-13-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-14-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-15-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-18-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-19-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-20-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-25-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-27-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-28-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-29-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-3-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-30-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-31-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-32-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-4-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-47-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-48-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-48-2.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-49-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-50-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-51-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-52-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-53-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-54-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-55-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-56-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-57-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-58-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-59-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-60-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-61-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-62-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-63-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-64-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-65-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-66-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-67-1.png","capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-9-1.png","capitulo-3-creacin-de-modelos_files/header-attrs-2.18/header-attrs.js","capitulo-3-creacin-de-modelos_files/jquery-3.6.0/jquery-3.6.0.js","capitulo-3-creacin-de-modelos_files/jquery-3.6.0/jquery-3.6.0.min.js","capitulo-3-creacin-de-modelos_files/jquery-3.6.0/jquery-3.6.0.min.map","capitulo-3-creacin-de-modelos_files/popper-2.6.0/popper.min.js","capitulo-3-creacin-de-modelos_files/tippy-6.2.7/tippy-bundle.umd.min.js","capitulo-3-creacin-de-modelos_files/tippy-6.2.7/tippy-light-border.css","capitulo-3-creacin-de-modelos_files/tippy-6.2.7/tippy.css","capitulo-3-creacin-de-modelos_files/tippy-6.2.7/tippy.umd.min.js","capitulo-3-creacin-de-modelos_files/webcomponents-2.0.0/webcomponents.js","data/Base-en-excel-Encuesta-Nacional-de-Medio-Ambiente-2018.xlsx","data/var_dependientes_importancia_pca.sav","data/var_dependientes_preocupacion_pca.sav","data/var_dependientes_total.sav","data/var_dependientes_total_clean_unreduced_final.sav","data/var_dependientes_total_pca.sav","data/var_independientes_y_control.sav"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
  font-size: 100%;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      const citeChild = $(this).children()[0]
      // Do not process if @xyz has been used without escaping and without bibliography activated
      // https://github.com/rstudio/distill/issues/466
      if (citeChild === undefined) return true

      if (citeChild.nodeName == "D-FOOTNOTE") {
        var fn = citeChild
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        // Could use CSS.escape too here, we insure backward compatibility in navigator
        return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.18/header-attrs.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Capitulo 3: Creaci贸n de modelos","description":"A short description of the post.","authors":[{"author":"Farley Rimon","authorURL":{},"affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-11-03T00:00:00.000-03:00","citationText":"Rimon, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">ICP5006 Progress Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Capitulo 3: Creaci贸n de modelos</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>A short description of the post.</p></p>
</div>

<div class="d-byline">
  Farley Rimon true 
  
<br/>2022-11-03
</div>

<div class="d-article">
<p>Cargamos los datos y paquetes que necesitamos</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://strengejacke.github.io/sjmisc/'>sjmisc</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://haven.tidyverse.org'>haven</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/statistikat/VIM'>VIM</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://haozhu233.github.io/kableExtra/'>kableExtra</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://docs.ropensci.org/skimr/'>skimr</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://strengejacke.github.io/sjPlot/'>sjPlot</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/njtierney/naniar'>naniar</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.sthda.com/english/wiki/ggcorrplot-visualization-of-a-correlation-matrix-using-ggplot2'>ggcorrplot</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/njtierney/naniar'>naniar</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://had.co.nz/plyr'>plyr</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span> <span class='co'># df manipulation</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/leifeld/texreg/'>texreg</a></span><span class='op'>)</span> <span class='co'># model evaluation</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.stats.ox.ac.uk/pub/MASS4/'>MASS</a></span><span class='op'>)</span> <span class='co'># ordinal regression</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.stats.ox.ac.uk/pub/MASS4/'>nnet</a></span><span class='op'>)</span> <span class='co'># multinomial regression</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://moderndive.github.io/moderndive/'>moderndive</a></span><span class='op'>)</span> <span class='co'># get_regression_table</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://broom.tidymodels.org/'>broom</a></span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Cargamos los datos:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span>list <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='va'>ind_con_control</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_sav</a></span><span class='op'>(</span><span class='st'>"data/var_independientes_y_control.sav"</span><span class='op'>)</span></span>
<span><span class='va'>dep_pca_total</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_sav</a></span><span class='op'>(</span><span class='st'>"data/var_dependientes_total_pca.sav"</span><span class='op'>)</span></span>
<span><span class='va'>dep_pca_importancia</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_sav</a></span><span class='op'>(</span><span class='st'>"data/var_dependientes_importancia_pca.sav"</span><span class='op'>)</span></span>
<span><span class='va'>dep_pca_preocupacion</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_sav</a></span><span class='op'>(</span><span class='st'>"data/var_dependientes_preocupacion_pca.sav"</span><span class='op'>)</span></span>
<span><span class='va'>dep_total_clean</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_sav</a></span><span class='op'>(</span><span class='st'>"data/var_dependientes_total_clean_unreduced_final.sav"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h1 id="construcci贸n-de-modelo">1 Construcci贸n de modelo</h1>
<p>Juntamos los dataframes:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_total</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/merge.html'>merge</a></span><span class='op'>(</span><span class='va'>ind_con_control</span>, <span class='va'>dep_pca_total</span>,</span>
<span>                          by <span class='op'>=</span> <span class='st'>'row.names'</span>, all <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span>
<span><span class='va'>reg_pca_importancia</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/merge.html'>merge</a></span><span class='op'>(</span><span class='va'>ind_con_control</span>, <span class='va'>dep_pca_importancia</span>,</span>
<span>                          by <span class='op'>=</span> <span class='st'>'row.names'</span>, all <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span>
<span><span class='va'>reg_pca_preocupacion</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/merge.html'>merge</a></span><span class='op'>(</span><span class='va'>ind_con_control</span>, <span class='va'>dep_pca_preocupacion</span>,</span>
<span>                          by <span class='op'>=</span> <span class='st'>'row.names'</span>, all <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span>
<span><span class='va'>dep_total_clean</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/merge.html'>merge</a></span><span class='op'>(</span><span class='va'>ind_con_control</span>, <span class='va'>dep_total_clean</span>,</span>
<span>                          by <span class='op'>=</span> <span class='st'>'row.names'</span>, all <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h2 id="conceptos-basicos-para-modelos-de-regresion">Conceptos basicos para modelos de regresion</h2>
<p>Nuestra variable dependiente es continua ya que se toma el promedio.</p>
<p>Requisitos para regresi贸n m煤ltiple:</p>
<ul>
<li>Tamano muestral elevado de minimo 500 observaciones. Tenemos 6466 observaciones asi que satisfacemos eso.</li>
<li>Variable dependiente tiene que ser continua o dicot贸mica</li>
<li>Mejor es ver relacion individual entre VD y VI y despues anadir al set de componentes</li>
<li>No anadir variables innecesarias!</li>
<li>Para tener variables significativas , el p &lt; 0.05</li>
</ul>
<h2 id="modelo-regresi贸n-lineal-pca">1.1 Modelo regresi贸n lineal PCA</h2>
<p>Vemos que el plot no muestra alguna relaci贸n linear. Es algo esperado ya que nuestra variable independiente no es parametrica. Vemos que el indice del PCA esta distribuido por todas partes sin mostral alg煤na relaci贸n con las zonas. A煤n asi es posible correr un modelo de regresi贸n lineal m煤ltiple, ya que la regresi贸n sirve como una manera de predecir cuanto incrementa nuestra variable dependiente cuando tienes un incremento de una unidad en nuestra variable(s) independientes. Es decir, <strong>la linearidad en regresi贸n asume que es esta relaci贸n entre variable dependiente y independiente estan correlacionadas</strong>, por la cual es un suposici贸n de nuestro modelo.</p>
<p>Corremos los modelos y controlamos sobre las variables confundidores para ver si a煤n asi hay alguna significancia estadistica.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_total</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_01</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indice PCA 01"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indice PCA 01"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-3-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_total</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_02</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indica PCA"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indica PCA"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-4-1.png" width="624" /></p>
</div>
<p>Las Zonas de Chile no parecen tener ning煤na significancia estadistica. Su valor-p &gt; 0.05, indicando que nuestra hip贸tesis nula es cierta (la percepci贸n no cambia entre zonas). Es mas, el <span class="math inline">\(R^{2}\)</span> ajustado es de 0. No hay ning煤na significancia.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_tot_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_tot_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_tot</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_tot_1</span>, <span class='va'>modelo_pca_tot_2</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_tot</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
=====================================
             Model 1      Model 2    
-------------------------------------
(Intercept)    61.60 ***    66.78 ***
               (0.33)       (0.22)   
ZONAS           0.04         0.07    
               (0.12)       (0.08)   
-------------------------------------
R^2             0.00         0.00    
Adj. R^2       -0.00        -0.00    
Num. obs.    6130         6130       
=====================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<p>Controlamos por las variables confundidoras mas relevantes seg煤n la literatura. Esto seria, el nivel socio-economico (NSE), el nivel de educaci贸n, y la edad.</p>
<p>Tampoco las variables confundidoras parecen tener alguna significancia estadistica.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_tot_1_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_tot_2_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_tot_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_tot_1_2</span>, <span class='va'>modelo_pca_tot_2_2</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_tot_2</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
=====================================
             Model 1      Model 2    
-------------------------------------
(Intercept)    61.45 ***    66.35 ***
               (1.10)       (0.72)   
ZONAS           0.04         0.06    
               (0.12)       (0.08)   
NSE             0.10         0.14    
               (0.17)       (0.11)   
Edad           -0.00        -0.00    
               (0.01)       (0.01)   
Niv_Edu         0.00         0.02    
               (0.09)       (0.06)   
-------------------------------------
R^2             0.00         0.00    
Adj. R^2       -0.00        -0.00    
Num. obs.    6130         6130       
=====================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<p>Anadimos todas las variables confundidoras que tenemos. Esto va con el riesgo que hacemos un <strong>overfit</strong> de nuestro modelo, a nuestros datos especificos. A煤n asi, hacemos esto para ver si hay alg煤na relevancia.</p>
<p>Sacamos los nombres de todos las variables independientes:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>ind_con_control</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code> [1] &quot;ZONAS&quot;                 &quot;NSE&quot;                  
 [3] &quot;Edad&quot;                  &quot;Niv_Edu&quot;              
 [5] &quot;Estudiante&quot;            &quot;Trab_Ingr&quot;            
 [7] &quot;Religion&quot;              &quot;Razon_Bici&quot;           
 [9] &quot;Automovil_Combustible&quot; &quot;Transporte_mas_freq&quot;  </code></pre>
</div>
<p>Interesantemente, solo el uso de transporte mas frecuente tiene una significancia estadistica con valor-p &lt;0.05. Continuamos con nuestra investigacion inicial, pero vamos a ver a esta hip贸tesis, el uso de transporte afecta tu percepci贸n sobre el cambio climatico, luego. Lo mantenemos en el fondo de nuestras mentes.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_tot_1_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelo_pca_tot_2_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_tot_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_tot_1_3</span>, <span class='va'>modelo_pca_tot_2_3</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_tot_3</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
===============================================
                       Model 1      Model 2    
-----------------------------------------------
(Intercept)              63.51 ***    68.23 ***
                         (1.91)       (1.24)   
ZONAS                     0.01         0.01    
                         (0.16)       (0.10)   
NSE                      -0.27        -0.20    
                         (0.24)       (0.15)   
Edad                     -0.01        -0.00    
                         (0.01)       (0.01)   
Estudiante                0.03        -0.22    
                         (0.56)       (0.36)   
Niv_Edu                  -0.08        -0.00    
                         (0.12)       (0.08)   
Razon_Bici               -0.10        -0.00    
                         (0.07)       (0.05)   
Trab_Ingr                 0.09         0.03    
                         (0.10)       (0.06)   
Religion                  0.04         0.01    
                         (0.10)       (0.06)   
Automovil_Combustible     0.04        -0.05    
                         (0.28)       (0.18)   
Transporte_mas_freq      -0.04        -0.16 *  
                         (0.12)       (0.07)   
-----------------------------------------------
R^2                       0.00         0.00    
Adj. R^2                 -0.00        -0.00    
Num. obs.              3602         3602       
===============================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<p>Almenos vemos que no hay sesgo en la predicci贸n.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>modelo_pca_tot_2_3</span><span class='op'>$</span><span class='va'>fitted.values</span>, y <span class='op'>=</span> <span class='va'>modelo_pca_tot_2_3</span><span class='op'>$</span><span class='va'>residuals</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Valores predichos"</span>, y <span class='op'>=</span> <span class='st'>"Residuos"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_hline</a></span><span class='op'>(</span>mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-9-1.png" width="624" /></p>
</div>
<p>Cuando solo el uso de transporte mas frecuente, incluyendo variables confundidoras mas relevantes, vemos que ya no es significante. Mejor no cambiar la hipotesis ya que la significancia depende de controlar (y overfit) el modelo a nuestros datos.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_tot_2_4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_tot_2_5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='va'>modelos_pca_tot_2_4_5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_tot_2_4</span>, <span class='va'>modelo_pca_tot_2_5</span><span class='op'>)</span> </span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_tot_2_4_5</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
=============================================
                     Model 1      Model 2    
---------------------------------------------
(Intercept)            67.14 ***    66.67 ***
                       (0.18)       (0.71)   
Transporte_mas_freq    -0.06        -0.06    
                       (0.05)       (0.05)   
Edad                                -0.00    
                                    (0.01)   
NSE                                  0.14    
                                    (0.11)   
Niv_Edu                              0.02    
                                    (0.06)   
---------------------------------------------
R^2                     0.00         0.00    
Adj. R^2                0.00        -0.00    
Num. obs.            6130         6130       
=============================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<h3 id="modelo-regresi贸n-lineal-pca-total-filtrando-outliers">Modelo regresi贸n lineal PCA total filtrando outliers</h3>
<p>Vemos que la distribuci贸n de los dos indices que creamos en la exploraci贸n son un poco diferentes. En el primer indice hay un grupo de datos separados del resto, con un valor entre 0 y 25. En el indice 2 vemos un comportamiento similar, solo que esto grupo es mas pequeno. Podemos ver, si filtramos estos datos si el modelo tendria mas significancia.</p>
<p>La cantidad de valores bajo el 25 para el indice 1, es de 186, un 3 % de nuestros datos. Para el indice 2 es un 0.05 % de nuestros datos. Asumo que es tan minimo, que filtrar estos subsets no afectaria la predicci贸n del modelo.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>reg_pca_total</span><span class='op'>$</span><span class='va'>indice_01</span><span class='op'>&lt;</span><span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 186</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>reg_pca_total</span><span class='op'>$</span><span class='va'>indice_02</span><span class='op'>&lt;</span><span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 3</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_total_filter_indice1</span> <span class='op'>&lt;-</span> <span class='va'>reg_pca_total</span><span class='op'>[</span><span class='va'>reg_pca_total</span><span class='op'>$</span><span class='va'>indice_01</span>  <span class='op'>&gt;</span><span class='fl'>25</span>, <span class='op'>]</span></span>
<span><span class='va'>reg_pca_total_filter_indice2</span> <span class='op'>&lt;-</span> <span class='va'>reg_pca_total</span><span class='op'>[</span><span class='va'>reg_pca_total</span><span class='op'>$</span><span class='va'>indice_02</span>  <span class='op'>&gt;</span><span class='fl'>25</span>, <span class='op'>]</span></span></code></pre>
</div>
</div>
<p>A煤n, no parece haber ning煤na significancia estadistica.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_tot_1_filtered</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total_filter_indice1</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_tot_2_filtered</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total_filter_indice2</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_tot_filtered</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_tot_1_filtered</span>, <span class='va'>modelo_pca_tot_2_filtered</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_tot_filtered</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
=====================================
             Model 1      Model 2    
-------------------------------------
(Intercept)    63.27 ***    66.80 ***
               (0.19)       (0.22)   
ZONAS           0.01         0.07    
               (0.07)       (0.08)   
-------------------------------------
R^2             0.00         0.00    
Adj. R^2       -0.00        -0.00    
Num. obs.    5944         6127       
=====================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<h3 id="modelo-regresi贸n-lineal-pca-con-ordinal-smooth">Modelo regresi贸n lineal PCA con ordinal smooth</h3>
<h3 id="modelo-regresi贸n-lineal-pca-preocupacion">Modelo regresi贸n lineal PCA preocupacion</h3>
<p>Vemos una distribuci贸n muy uniforme entres las diferentes zonas. Esto ya indica que no va a hay una relaci贸n concreta entre nuestra variable independiente, y dependiente. Sin embargo, si controlamos sobre las variables confundidoras, podriamos tener alguna significancia.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_preocupacion</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_01</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indica PCA"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indica PCA"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-14-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_preocupacion</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_02</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indica PCA"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indica PCA"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-15-1.png" width="624" /></p>
</div>
<p>El modelo no parece tener alg煤na relevancia. Nuestra hip贸tesis, que la zona puede predecir el nivel de preocupaci贸n no parece ser valida.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_preo_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span>, data <span class='op'>=</span> <span class='va'>reg_pca_preocupacion</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_preo_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span>, data <span class='op'>=</span> <span class='va'>reg_pca_preocupacion</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_preo</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_preo_1</span>, <span class='va'>modelo_pca_preo_2</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_preo</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
=====================================
             Model 1      Model 2    
-------------------------------------
(Intercept)    34.84 ***    35.93 ***
               (0.52)       (0.50)   
ZONAS           0.17         0.16    
               (0.18)       (0.17)   
-------------------------------------
R^2             0.00         0.00    
Adj. R^2       -0.00        -0.00    
Num. obs.    6130         6130       
=====================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_preo_1_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span>, data <span class='op'>=</span> <span class='va'>reg_pca_preocupacion</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_preo_2_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span>, data <span class='op'>=</span> <span class='va'>reg_pca_preocupacion</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_preo_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_preo_1_2</span>, <span class='va'>modelo_pca_preo_2_2</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_preo_2</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
=====================================
             Model 1      Model 2    
-------------------------------------
(Intercept)    34.57 ***    34.54 ***
               (1.72)       (1.64)   
ZONAS           0.16         0.15    
               (0.18)       (0.18)   
NSE             0.34         0.43    
               (0.26)       (0.25)   
Edad           -0.01        -0.00    
               (0.01)       (0.01)   
Niv_Edu        -0.01         0.07    
               (0.14)       (0.13)   
-------------------------------------
R^2             0.00         0.00    
Adj. R^2        0.00         0.00    
Num. obs.    6130         6130       
=====================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_preo_1_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>reg_pca_preocupacion</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelo_pca_preo_2_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>reg_pca_preocupacion</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_preo_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_preo_1_3</span>, <span class='va'>modelo_pca_preo_2_3</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_preo_3</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
===============================================
                       Model 1      Model 2    
-----------------------------------------------
(Intercept)              34.37 ***    35.47 ***
                         (2.96)       (2.83)   
ZONAS                     0.17         0.06    
                         (0.24)       (0.23)   
NSE                       0.14         0.14    
                         (0.37)       (0.35)   
Edad                     -0.02        -0.00    
                         (0.02)       (0.02)   
Estudiante                0.01        -0.59    
                         (0.86)       (0.83)   
Niv_Edu                   0.07         0.24    
                         (0.19)       (0.18)   
Razon_Bici                0.14         0.15    
                         (0.11)       (0.10)   
Trab_Ingr                 0.13         0.02    
                         (0.15)       (0.14)   
Religion                  0.08        -0.05    
                         (0.15)       (0.14)   
Automovil_Combustible    -0.33        -0.36    
                         (0.43)       (0.41)   
Transporte_mas_freq      -0.16        -0.22    
                         (0.18)       (0.17)   
-----------------------------------------------
R^2                       0.00         0.00    
Adj. R^2                 -0.00        -0.00    
Num. obs.              3602         3602       
===============================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<h3 id="modelo-regresi贸n-lineal-pca-importancia">Modelo regresi贸n lineal PCA importancia</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_importancia</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_01</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indica PCA"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indica PCA"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-19-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_importancia</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_02</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indica PCA"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indica PCA"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-20-1.png" width="624" /></p>
</div>
<p>El modelo no parece tener alg煤na relevancia. Nuestra hip贸tesis, que la zona puede predecir el nivel de importancia no parece ser valida. El tipo de combustible que alguien tiene un valor-p &lt; 0.05. Sin embargo, para cambiar nuestra hipotesis y cambiar esto hay algunaas cosas que hay que considerar que no todo el mundo tienen un auto. Por esta razon, no se puede filtrar sobre un subgrupo de la populaci贸n que tenga vehiculo.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_imp_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_imp_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_imp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_imp_1</span>, <span class='va'>modelo_pca_imp_2</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_imp</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>
=====================================
             Model 1      Model 2    
-------------------------------------
(Intercept)    28.77 ***    21.13 ***
               (0.21)       (0.16)   
ZONAS          -0.02        -0.00    
               (0.07)       (0.06)   
-------------------------------------
R^2             0.00         0.00    
Adj. R^2       -0.00        -0.00    
Num. obs.    6130         6130       
=====================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_imp_1_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_imp_2_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_imp_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_imp_1_2</span>, <span class='va'>modelo_pca_imp_2_2</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_imp_2</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
=====================================
             Model 1      Model 2    
-------------------------------------
(Intercept)    28.27 ***    20.62 ***
               (0.69)       (0.53)   
ZONAS          -0.02        -0.00    
               (0.07)       (0.06)   
NSE             0.06         0.07    
               (0.11)       (0.08)   
Edad           -0.00        -0.00    
               (0.01)       (0.00)   
Niv_Edu         0.06         0.06    
               (0.06)       (0.04)   
-------------------------------------
R^2             0.00         0.00    
Adj. R^2       -0.00        -0.00    
Num. obs.    6130         6130       
=====================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_imp_1_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelo_pca_imp_2_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_pca_imp_3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_imp_1_3</span>, <span class='va'>modelo_pca_imp_2_3</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_imp_3</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
===============================================
                       Model 1      Model 2    
-----------------------------------------------
(Intercept)              29.50 ***    21.43 ***
                         (1.18)       (0.90)   
ZONAS                     0.01         0.04    
                         (0.10)       (0.07)   
NSE                       0.06         0.05    
                         (0.15)       (0.11)   
Edad                     -0.01        -0.00    
                         (0.01)       (0.01)   
Estudiante               -0.21        -0.14    
                         (0.34)       (0.26)   
Niv_Edu                  -0.02         0.01    
                         (0.08)       (0.06)   
Razon_Bici                0.05         0.05    
                         (0.04)       (0.03)   
Trab_Ingr                 0.01         0.01    
                         (0.06)       (0.05)   
Religion                  0.05         0.03    
                         (0.06)       (0.04)   
Automovil_Combustible    -0.40 *      -0.32 *  
                         (0.17)       (0.13)   
Transporte_mas_freq       0.04        -0.00    
                         (0.07)       (0.05)   
-----------------------------------------------
R^2                       0.00         0.00    
Adj. R^2                 -0.00        -0.00    
Num. obs.              3602         3602       
===============================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<p>Cuando solo vemos el uso de combustible, incluyendo variables confundidoras mas relevantes, vemos que ya aun sigue siendo significante esta variable predictiva. Esto los discutimos en la siguiente secci贸n.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_imp_1_4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_imp_1_5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelo_pca_imp_2_4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span><span class='va'>modelo_pca_imp_2_5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_02</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='va'>modelos_pca_imp_4_5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_imp_1_4</span>,<span class='va'>modelo_pca_imp_1_5</span>,<span class='va'>modelo_pca_imp_2_4</span>, <span class='va'>modelo_pca_imp_2_5</span><span class='op'>)</span> </span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_imp_4_5</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
=========================================================================
                       Model 1      Model 2      Model 3      Model 4    
-------------------------------------------------------------------------
(Intercept)              29.33 ***    29.66 ***    21.60 ***    21.61 ***
                         (0.24)       (0.93)       (0.18)       (0.71)   
Automovil_Combustible    -0.39 *      -0.38 *      -0.31 *      -0.31 *  
                         (0.17)       (0.17)       (0.13)       (0.13)   
Edad                                  -0.01                     -0.01    
                                      (0.01)                    (0.01)   
NSE                                    0.07                      0.06    
                                      (0.14)                    (0.11)   
Niv_Edu                               -0.00                      0.02    
                                      (0.07)                    (0.06)   
-------------------------------------------------------------------------
R^2                       0.00         0.00         0.00         0.00    
Adj. R^2                  0.00         0.00         0.00         0.00    
Num. obs.              3636         3636         3636         3636       
=========================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<p>Sin embargo vemos que hay un sesgo hacia la derecha en los valores predichos.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># estimadores &lt;- get_regression_table(modelo_pca_imp_1_5)</span></span>
<span><span class='co'># estimadores_obs &lt;- get_regression_points(modelo_pca_imp_1_5)</span></span>
<span></span>
<span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>modelo_pca_imp_1_5</span><span class='op'>$</span><span class='va'>fitted.values</span>, y <span class='op'>=</span> <span class='va'>modelo_pca_imp_1_5</span><span class='op'>$</span><span class='va'>residuals</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Valores predichos"</span>, y <span class='op'>=</span> <span class='st'>"Residuos"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_hline</a></span><span class='op'>(</span>mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-25-1.png" width="624" /></p>
</div>
<h2 id="discusi贸n">Discusi贸n</h2>
<p>Como hemos visto los modelos que creamos no parecen tener una significancia estadistica. Esto significa que tampoco es relevante evaluarlas. Durante este proceso hay alg煤nas observaciones que merecen una discusi贸n. Esta discusi贸n llevara a una soluci贸n para tener un modelo 煤til, sea porque cambiamos la hip贸tesis, o porque cambiamos nuestra metodologia.</p>
<ul>
<li><ol type="1">
<li>La manera en la que creamos el indice puede ser incorrecta. Aunque creamos dos diferentes indices, ambas son amiguas.</li>
</ol></li>
<li><ul>
<li>Es posible que otras maneras de crear el indice si muestren una significancia.</li>
</ul></li>
<li><ol start="2" type="1">
<li>Al incluir variables con poca correlacion afectamos la aplicaci贸n del PCA.</li>
</ol></li>
<li><ul>
<li>Es dificil determinar la correlaci贸n entre variables no-parametricas que intentar cuantificar conceptos. Especificamente, en algunos casos incluimos variables que no tienen correlaci贸n porque teoreticamente tienen una relaci贸n, aunque no se vea en los datos. Podriamos excluir variables con poca correlaci贸n, aunque esto signifique que la latente cambie.</li>
</ul></li>
<li><ol start="3" type="1">
<li>Podriamos cambiar nuestra variable independiente a una que vea la diferencia entre la regi贸n metropolitana y el resto de Chile.</li>
</ol></li>
<li><ul>
<li>Chile tiene una distribuci贸n de populaci贸n muy concentrada en la regi贸n metropolitana (RM) por la que la gente de esta regi贸n tiene otros problemas ambientales que el resto de Chile. Para esto podriamos:</li>
</ul></li>
<li><ul>
<li><strong>1</strong> crear un PCA nuevo con otras variables dependientes.<strong>No lo consideramos por una limitaci贸n al tiempo disponible</strong></li>
</ul></li>
<li><ul>
<li><strong>2</strong> crear una columna que indice si la zona es afuera o adentro de la regi贸n metropolitana. Despues corremos nuevamente los modelos a ver si la predicci贸n mejora. <strong>Lo consideramos por una limitaci贸n al tiempo disponible</strong></li>
</ul></li>
<li><ol start="4" type="1">
<li>Nuestras latentes podrian no estar bien formuladas porque el concepto sigue siendo muy amplio.</li>
</ol></li>
<li><ul>
<li>Para esto podriamos enfocarnos en latentes que conceptualmente sean menos ambiguas. Esto podria enfocarse en una latente que tenga una parilla hecha con un alfa de Cronbach alto. <strong>No lo consideramos por una limitaci贸n al tiempo disponible</strong></li>
</ul></li>
<li><ol start="5" type="1">
<li>El uso de combustible para el vehiculo tiene una significancia estadistica al predecir el indice de importancia. Sin embargo, tengo la idea que hay otra razon por la que muestra significancia. Una variable que domina ambas variables. Esto podria ser la posesion de tener un auto. Requiere mas investigaci贸n. <strong>No lo consideramos porque cae afuera del marco te贸rico de esta investigaci贸n</strong></li>
</ol></li>
<li><ol start="6" type="1">
<li>Puede ser que el modelo funcione para modelo no-lineales. Sin embargo, esto requiere tener un muy buen conocimiento de los conceptos para asi entender lo que el modelo predice.<strong>No lo consideramos porque cae afuera del contenido de esta clase</strong></li>
</ol></li>
<li><ol start="7" type="1">
<li>Corremos Analisis Factorial donde determinamos si se pueden clusterizar alg煤nos conceptos. Esto nos inspira a crear un PCA del conjunto que crea. Si es asi, bien deberiamos de conseguir un modelo con significancia estadistica, y por esto una posible causalidad.</li>
</ol></li>
<li><ol start="8" type="1">
<li>Usar Analisis Factorial para determinar si se forman dos latentes del P19 y P21. Incluimos las variables que excluimos anteriormente por el alfa de Cronbach.</li>
</ol></li>
<li><ol start="9" type="1">
<li></li>
</ol></li>
</ul>
<h3 id="enfoque-punto-3">Enfoque punto 3</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># #RECODING the values</span></span>
<span><span class='va'>zonas_rec</span> <span class='op'>&lt;-</span> <span class='va'>reg_pca_total</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://strengejacke.github.io/sjmisc/reference/rec.html'>rec</a></span><span class='op'>(</span>rec<span class='op'>=</span> <span class='st'>"1=1;2,3,4=0;else=copy"</span>,suffix<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>zonas_rec</span> <span class='op'>&lt;-</span> <span class='va'>reg_pca_importancia</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://strengejacke.github.io/sjmisc/reference/rec.html'>rec</a></span><span class='op'>(</span>rec<span class='op'>=</span> <span class='st'>"1=1;2,3,4=0;else=copy"</span>,suffix<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>zonas_rec</span> <span class='op'>&lt;-</span> <span class='va'>reg_pca_preocupacion</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://strengejacke.github.io/sjmisc/reference/rec.html'>rec</a></span><span class='op'>(</span>rec<span class='op'>=</span> <span class='st'>"1=1;2,3,4=0;else=copy"</span>,suffix<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>reg_pca_total</span><span class='op'>$</span><span class='va'>Zonas_recoded</span> <span class='op'>&lt;-</span> <span class='va'>zonas_rec</span></span>
<span><span class='va'>reg_pca_importancia</span><span class='op'>$</span><span class='va'>Zonas_recoded</span> <span class='op'>&lt;-</span> <span class='va'>zonas_rec</span></span>
<span><span class='va'>reg_pca_preocupacion</span><span class='op'>$</span><span class='va'>Zonas_recoded</span> <span class='op'>&lt;-</span> <span class='va'>zonas_rec</span></span>
<span></span>
<span><span class='va'>reg_pca_total</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>reg_pca_total</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='va'>reg_pca_total</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>data.frame</span>, <span class='va'>reg_pca_total</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>reg_pca_importancia</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>reg_pca_importancia</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='va'>reg_pca_importancia</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>data.frame</span>, <span class='va'>reg_pca_importancia</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>reg_pca_preocupacion</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>reg_pca_preocupacion</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='va'>reg_pca_preocupacion</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>data.frame</span>, <span class='va'>reg_pca_preocupacion</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_importancia</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>Zonas_recoded</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_01</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indice PCA 1"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indice PCA 1"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-27-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_importancia</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>Zonas_recoded</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_02</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indice PCA 2"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indice PCA 2"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-28-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_preocupacion</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>Zonas_recoded</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_01</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indice PCA 1"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indica PCA 1"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-29-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_preocupacion</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>Zonas_recoded</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_02</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indice PCA 2"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indice PCA 2"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-30-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_preocupacion</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>Zonas_recoded</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_01</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indice PCA 1"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indice PCA 1"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-31-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>reg_pca_preocupacion</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>Zonas_recoded</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>indice_02</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>shape <span class='op'>=</span> <span class='fl'>16</span>, position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_jitter.html'>position_jitter</a></span><span class='op'>(</span><span class='fl'>0.2</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"#588157"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#a3b18a"</span>, color <span class='op'>=</span> <span class='st'>"#3a5a40"</span>, alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Zonas vs Indice PCA 2"</span> ,x <span class='op'>=</span> <span class='st'>"Zonas"</span>, y <span class='op'>=</span><span class='st'>"Indice PCA 2"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>"Roboto Condensed"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-32-1.png" width="624" /></p>
</div>
<p>Nada aun. De nuevo el uso de tipo de autocombustible tiene significancia estadistica. Sin embargo, creo que esto es una variable confundidora, ya que hay otra variable que afecta el autocombustible y la percepci贸n.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_pca_preo_enfoque3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>reg_pca_preocupacion</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelo_pca_imp_enfoque3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>reg_pca_importancia</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelo_pca_tot_enfoque3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>indice_01</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>reg_pca_total</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='va'>modelos_pca_enfoque3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_pca_preo_enfoque3</span>, <span class='va'>modelo_pca_imp_enfoque3</span>, <span class='va'>modelo_pca_tot_enfoque3</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_pca_enfoque3</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>
============================================================
                       Model 1      Model 2      Model 3    
------------------------------------------------------------
(Intercept)              34.37 ***    29.50 ***    63.51 ***
                         (2.96)       (1.18)       (1.91)   
ZONAS                     0.17         0.01         0.01    
                         (0.24)       (0.10)       (0.16)   
NSE                       0.14         0.06        -0.27    
                         (0.37)       (0.15)       (0.24)   
Edad                     -0.02        -0.01        -0.01    
                         (0.02)       (0.01)       (0.01)   
Estudiante                0.01        -0.21         0.03    
                         (0.86)       (0.34)       (0.56)   
Niv_Edu                   0.07        -0.02        -0.08    
                         (0.19)       (0.08)       (0.12)   
Razon_Bici                0.14         0.05        -0.10    
                         (0.11)       (0.04)       (0.07)   
Trab_Ingr                 0.13         0.01         0.09    
                         (0.15)       (0.06)       (0.10)   
Religion                  0.08         0.05         0.04    
                         (0.15)       (0.06)       (0.10)   
Automovil_Combustible    -0.33        -0.40 *       0.04    
                         (0.43)       (0.17)       (0.28)   
Transporte_mas_freq      -0.16         0.04        -0.04    
                         (0.18)       (0.07)       (0.12)   
------------------------------------------------------------
R^2                       0.00         0.00         0.00    
Adj. R^2                 -0.00        -0.00        -0.00    
Num. obs.              3602         3602         3602       
============================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<h3 id="enfoque-punto-2">Enfoque punto 2</h3>
<h3 id="enfoque-punto-4">Enfoque punto 4</h3>
<h4 id="intento-con-p21_promedio">Intento con P21_promedio</h4>
<p>Nada</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>zonas_rec</span> <span class='op'>&lt;-</span> <span class='va'>dep_total_clean</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS.x</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://strengejacke.github.io/sjmisc/reference/rec.html'>rec</a></span><span class='op'>(</span>rec<span class='op'>=</span> <span class='st'>"1=1;2,3,4=0;else=copy"</span>,suffix<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='va'>dep_total_clean</span><span class='op'>$</span><span class='va'>Zonas_recoded</span> <span class='op'>&lt;-</span> <span class='va'>zonas_rec</span></span>
<span></span>
<span><span class='va'>dep_total_clean</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>dep_total_clean</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>    <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>is.factor</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span> <span class='kw'>else</span> <span class='va'>x</span></span>
<span><span class='op'>}</span><span class='op'>)</span></span>
<span><span class='va'>dep_total_clean</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>data.frame</span>, <span class='va'>dep_total_clean</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>modelo_P21_promedio_zonas_recoded_enfoque4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>P21_promedio</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>Zonas_recoded</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>dep_total_clean</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelo_P21_promedio_zonas_normal_enfoque4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>P21_promedio</span> <span class='op'>~</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='va'>ZONAS.x</span> <span class='op'>+</span> <span class='va'>NSE</span> <span class='op'>+</span> <span class='va'>Edad</span> <span class='op'>+</span> <span class='va'>Estudiante</span> <span class='op'>+</span> <span class='va'>Niv_Edu</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Trab_Ingr</span> <span class='op'>+</span> <span class='va'>Religion</span> <span class='op'>+</span> <span class='va'>Razon_Bici</span> <span class='op'>+</span> <span class='va'>Automovil_Combustible</span> <span class='op'>+</span> <span class='va'>Transporte_mas_freq</span> <span class='op'>+</span> <span class='va'>Religion</span>, data <span class='op'>=</span> <span class='va'>dep_total_clean</span>, na.action <span class='op'>=</span> <span class='va'>na.exclude</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>modelos_P21_promedio_enfoque4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>modelo_P21_promedio_zonas_recoded_enfoque4</span>,<span class='va'>modelo_P21_promedio_zonas_normal_enfoque4</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/texreg/man/screenreg.html'>screenreg</a></span><span class='op'>(</span><span class='va'>modelos_P21_promedio_enfoque4</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>
===============================================
                       Model 1      Model 2    
-----------------------------------------------
(Intercept)               4.20 ***     4.19 ***
                         (0.18)       (0.18)   
Zonas_recoded             0.02                 
                         (0.04)                
NSE                       0.02         0.02    
                         (0.02)       (0.02)   
Edad                      0.00         0.00    
                         (0.00)       (0.00)   
Estudiante               -0.07        -0.07    
                         (0.05)       (0.05)   
Niv_Edu                   0.01         0.01    
                         (0.01)       (0.01)   
Razon_Bici                0.01         0.01    
                         (0.01)       (0.01)   
Trab_Ingr                 0.01         0.01    
                         (0.01)       (0.01)   
Religion                  0.01         0.01    
                         (0.01)       (0.01)   
Automovil_Combustible    -0.06 *      -0.06 *  
                         (0.03)       (0.03)   
Transporte_mas_freq       0.00         0.00    
                         (0.01)       (0.01)   
ZONAS.x                                0.01    
                                      (0.01)   
-----------------------------------------------
R^2                       0.00         0.00    
Adj. R^2                  0.00         0.00    
Num. obs.              2690         2690       
===============================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
<h4 id="intento-con-otro-analisis-de-pca">Intento con otro analisis de PCA</h4>
<p>Parilla 22 Efectividad de acciones (externas/no individuales)</p>
<p>P22A-G 驴Cu谩n efectivas cree que pueden llegar a hacer las acciones que emprendan para mitigar el cambio clim谩tico?: El gobierno y las municipalidades</p>
<p>Parilla 19 Sentimientos</p>
<p>Parilla 29 Politicas que hay que incorporar</p>
<p>Parilla 14 participacion protestas contra cambio climatico</p>
<p>Parilla 6 Acciones personales contra cambio climatico</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<h1 id="evaluando-los-mejores-modelos">2 Evaluando los mejores modelos</h1>
<p>El AIC mide la distancia que existe entre los par谩metros verdaderos y los estimadores del modelo mediante una distancia matem谩tica llamada divergencia Kullback-Leibler. Cuanto m谩s peque帽a sea la distancia, mejor ser谩 el modelo.</p>
<p>El BIC, a diferencia del AIC, penaliza la complejidad del modelo m谩s rigurosamente ya que adem谩s toma en consideraci贸n el n煤mero de observaciones de la muestra.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># broom::glance(modelo.lm)</span></span></code></pre>
</div>
</div>
<p>Grafico ROC: Lo m谩s importante de la figura es el 谩rea debajo de la curva diagonal que la cruza.
Sensibilidad: relaci贸n entre los verdaderos positivos y la suma de los verdaderos positivos m谩s los falsos negativos.
Especificidad: relaci贸n entre los verdaderos negativos y la suma de los falsos positivos a los verdaderos negativos.
Tener en consideraci贸n el c谩lculo del AUC (rea bajo la Curva): cuanto mayor sea, mejor ser谩 el ajuste.</p>
<h3 id="metodos-de-evaluaci贸n">Metodos de evaluaci贸n</h3>
<p>ANOVA is a statistical test for estimating how a quantitative dependent variable changes according to the levels of one or more categorical independent variables. ANOVA tests whether there is a difference in means of the groups at each level of the independent variable.</p>
<p>Esto lo usamos como recurso final para ver si hay variables que no contienen variacion en relaci贸n a otras variables independientes. Por ejemplo, si la
[<a href="https://www.scribbr.com/statistics/anova-in-r/" class="uri">https://www.scribbr.com/statistics/anova-in-r/</a>]</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># 驴Cu谩l es el efecto medio?</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># marginal_ef &lt;- margins(mod1a)</span></span>
<span><span class='co'># plot(marginal_ef)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># library(pscl)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># # Pseudo R-cuadrado</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># pR2(mod1b)[["McFadden"]]</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># # Pseudo R cuadrado ajustado</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># library(DescTools)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># PseudoR2(mod1b, c("McFadden"))</span></span></code></pre>
</div>
</div>
<h1 id="creaci贸n-de-clusters">3 Creaci贸n de clusters</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.sthda.com/english/rpkgs/factoextra'>factoextra</a></span><span class='op'>)</span> <span class='co'># Visualizaci贸n y c谩lculos</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://svn.r-project.org/R-packages/trunk/cluster/'>cluster</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://sites.google.com/site/malikacharrad/research/nbclust-package'>NbClust</a></span><span class='op'>)</span> <span class='co'># C谩lculo de 铆ndices</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://www.unibo.it/sitoweb/christian.hennig/en/'>fpc</a></span><span class='op'>)</span> <span class='co'># Clusters con iteraciones</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://talgalili.github.io/dendextend/'>dendextend</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Vemos para multicolinealidad primero que correr el algoritmo de cluster, porque el K-means es sensitivo a producir clusters incorrectos si se construye a base de dos o mas varianzas similares.</p>
<p>El clustering es un metodo que agrupa nuestro indice a base de la distancia entre el valor.</p>
<ol type="1">
<li><p>Vamos a formar clusters a base de las preguntas mas importantes de cada latente que analizamos. Es mejor no considerar demasiadas variables</p></li>
<li><p>Estandardizamos las variables. En este caso no estandarizamos las variables porque ya tienen una escala de Likert similar.</p></li>
<li><p>Corremos un analisis de multicolinealidad.</p></li>
<li><p>Analizamos usando cluster</p></li>
<li><p>Evaluamos los cluster</p></li>
</ol>
<p>Vamos a ver esto por regi贸n ya que hay mas regiones que zonas, haciendo la caracterizaci贸n por clusters mas significativo. Luego a base de los clusters, y por saber a cual zona pertenece una regi贸n, decidimos si en verdad la percepci贸n se puede categorizar a base de las zonas. En su forma, es una forma indirecta de ver si podemos categorizar a base de zona usando la regi贸n como variable instrumental.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>df_var</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_sav</a></span><span class='op'>(</span><span class='st'>"data/var_dependientes_total.sav"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h4 id="section">1</h4>
<p>Recordamos las columnas que tenemos:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>df_var</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code> [1] &quot;ZONAS&quot;        &quot;REGION&quot;       &quot;P34&quot;          &quot;P33&quot;         
 [5] &quot;NSE&quot;          &quot;P1_MAmb&quot;      &quot;P2_COD&quot;       &quot;P3F&quot;         
 [9] &quot;P4&quot;           &quot;P17_COD&quot;      &quot;P19_1&quot;        &quot;P19_2&quot;       
[13] &quot;P19_4&quot;        &quot;P19_4.1&quot;      &quot;P19_5&quot;        &quot;P19_6&quot;       
[17] &quot;P19_7&quot;        &quot;P19_8&quot;        &quot;P19_suma&quot;     &quot;P20&quot;         
[21] &quot;P21B&quot;         &quot;P21C&quot;         &quot;P21D&quot;         &quot;P21_promedio&quot;
[25] &quot;P30&quot;         </code></pre>
</div>
<p>Para disminuir la influencia que tiene la caracterizaci贸n a base de variables que no son significativas, formamos varios conceptos de las variables que podrian estar asociadas para la formaci贸n de un concepto. Formamos estos clusters a base de una mezcla de analisis cualitativo y cuantitativo. Vemos los conceptos que van juntos con las variables (1), y vemos las dimensiones que conseguimos anteriormente (2). Analizamos 1 y 2 separadamente y vemos si hay alguna consistencia en los resuktados que nos da la clusterizaci贸n.</p>
<ul>
<li>Indice de PCA formado</li>
<li>P1_MAmb (importancia relativa), P21D (importancia absoluta)</li>
<li>P19_2 (preocupaci贸n), P3F (calidad medio ambiente), P19_1 (Tristeza)</li>
<li>Todo: P1_MAmb, P3F, P19_2, P21D, P19_1</li>
<li>Dimension 1 (<strong>Sentimientos de preocupaci贸n hacia el cambio climatico</strong>)</li>
<li>Dimension 4 (<strong>Percepcion hacia problemas ambientales del medio ambiente de la regi贸n</strong>)</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#clusters</span></span>
<span><span class='va'>region_1</span> <span class='op'>&lt;-</span> <span class='va'>df_var</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>REGION</span>,<span class='va'>P1_MAmb</span>, <span class='va'>P21D</span><span class='op'>)</span></span>
<span><span class='va'>region_2</span> <span class='op'>&lt;-</span> <span class='va'>df_var</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>REGION</span>,<span class='va'>P19_2</span>, <span class='va'>P3F</span>, <span class='va'>P19_1</span><span class='op'>)</span></span>
<span><span class='va'>region_3</span> <span class='op'>&lt;-</span> <span class='va'>df_var</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>REGION</span>,<span class='va'>P19_2</span>, <span class='va'>P3F</span>, <span class='va'>P19_1</span>,<span class='va'>P1_MAmb</span>, <span class='va'>P21D</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>zonas_1</span> <span class='op'>&lt;-</span> <span class='va'>df_var</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS</span>,<span class='va'>P1_MAmb</span>, <span class='va'>P21D</span><span class='op'>)</span></span>
<span><span class='va'>zonas_2</span> <span class='op'>&lt;-</span> <span class='va'>df_var</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS</span>,<span class='va'>P19_2</span>, <span class='va'>P3F</span>, <span class='va'>P19_1</span><span class='op'>)</span></span>
<span><span class='va'>zonas_3</span> <span class='op'>&lt;-</span> <span class='va'>df_var</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS</span>,<span class='va'>P19_2</span>, <span class='va'>P3F</span>, <span class='va'>P19_1</span>,<span class='va'>P1_MAmb</span>, <span class='va'>P21D</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='va'>edad_3</span> <span class='op'>&lt;-</span> <span class='va'>df_var</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>P33</span>,<span class='va'>P19_2</span>, <span class='va'>P3F</span>, <span class='va'>P19_1</span>,<span class='va'>P1_MAmb</span>, <span class='va'>P21D</span><span class='op'>)</span></span>
<span><span class='va'>nse_3</span> <span class='op'>&lt;-</span> <span class='va'>df_var</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>NSE</span>,<span class='va'>P19_2</span>, <span class='va'>P3F</span>, <span class='va'>P19_1</span>,<span class='va'>P1_MAmb</span>, <span class='va'>P21D</span><span class='op'>)</span></span>
<span><span class='va'>edu_3</span> <span class='op'>&lt;-</span> <span class='va'>df_var</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>P34</span>,<span class='va'>P19_2</span>, <span class='va'>P3F</span>, <span class='va'>P19_1</span>,<span class='va'>P1_MAmb</span>, <span class='va'>P21D</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h4 id="section-1">2</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>region_1</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>region_1</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span></span>
<span><span class='va'>region_2</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>region_2</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span></span>
<span><span class='va'>region_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>region_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>edad_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>edad_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span></span>
<span><span class='va'>nse_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>nse_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span></span>
<span><span class='va'>edu_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>edu_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span></span>
<span><span class='va'>zonas_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>zonas_3</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h4 id="section-2">3</h4>
<p>Hay mucho NA (&gt;5%)</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># library(mice)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># md.pattern(region_3)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># aggr_plot &lt;- mice:aggr(region_3)</span></span></code></pre>
</div>
</div>
<p>Removemos las columnas con NA ya que no hay manera correcta de imputar sin tener un analisis profundo.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>region_3</span> <span class='op'>&lt;-</span> <span class='va'>region_3</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>REGION</span>, <span class='va'>P3F</span>, <span class='va'>P1_MAmb</span><span class='op'>)</span></span>
<span><span class='va'>zonas_3</span> <span class='op'>&lt;-</span> <span class='va'>zonas_3</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ZONAS</span>, <span class='va'>P3F</span>, <span class='va'>P1_MAmb</span><span class='op'>)</span></span>
<span><span class='va'>edad_3</span> <span class='op'>&lt;-</span> <span class='va'>edad_3</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>P33</span>, <span class='va'>P3F</span>, <span class='va'>P1_MAmb</span><span class='op'>)</span></span>
<span><span class='va'>edu_3</span> <span class='op'>&lt;-</span> <span class='va'>edu_3</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>P34</span>, <span class='va'>P3F</span>, <span class='va'>P1_MAmb</span><span class='op'>)</span></span>
<span><span class='va'>nse_3</span> <span class='op'>&lt;-</span> <span class='va'>nse_3</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>NSE</span>, <span class='va'>P3F</span>, <span class='va'>P1_MAmb</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Nada de que preocuparnos. No hay multicolinealidad.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggobi.github.io/ggally/'>GGally</a></span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>region_3</span><span class='op'>)</span><span class='op'>)</span> <span class='co'>#Correlaciones: es necesario omitir los NA. </span></span></code></pre>
</div>
<pre><code>             REGION          P3F      P1_MAmb
REGION   1.00000000 -0.026195487  0.013544075
P3F     -0.02619549  1.000000000 -0.002105683
P1_MAmb  0.01354407 -0.002105683  1.000000000</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ggobi.github.io/ggally/reference/ggcorr.html'>ggcorr</a></span><span class='op'>(</span><span class='va'>region_3</span>, label <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span> <span class='co'>#NA se omiten autom谩ticamente</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-47-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggobi.github.io/ggally/'>GGally</a></span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>zonas_3</span><span class='op'>)</span><span class='op'>)</span> <span class='co'>#Correlaciones: es necesario omitir los NA. </span></span></code></pre>
</div>
<pre><code>               ZONAS          P3F      P1_MAmb
ZONAS    1.000000000 -0.084019245 -0.008959161
P3F     -0.084019245  1.000000000 -0.002105683
P1_MAmb -0.008959161 -0.002105683  1.000000000</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://ggobi.github.io/ggally/reference/ggcorr.html'>ggcorr</a></span><span class='op'>(</span><span class='va'>zonas_3</span>, label <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span> <span class='co'>#NA se omiten autom谩ticamente</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-48-1.png" width="624" /></p>
</div>
<h4 id="section-3">4</h4>
<h3 id="regi贸n">Regi贸n</h3>
<p>Interesantemente, para la regiones parece no formar un cluster optimo. El sum of squares inter-clusters es muy bajo, por lo que hay mucho superposici贸n entre los diferentes clusters. Tampoco forma un cluster optimo en cuatro clusters, el n煤mero ideal si se podria caracterizar a base de zonas.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>k1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/fpc/man/kmeansruns.html'>kmeansruns</a></span><span class='op'>(</span><span class='va'>region_3</span>, krange <span class='op'>=</span> <span class='fl'>3</span>, runs <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># Suma de errores al cuadrado entre clusters: la separaci贸n entre los clusters explica el 47.5% de los datos</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_cluster.html'>fviz_cluster</a></span><span class='op'>(</span><span class='va'>k1</span>, data <span class='op'>=</span> <span class='va'>region_3</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-49-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/dist.html'>dist</a></span><span class='op'>(</span><span class='va'>region_3</span>, method <span class='op'>=</span> <span class='st'>"euclidean"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p><strong>M茅todo de codos</strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>region_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"wss"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo codos"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-51-1.png" width="624" /></p>
</div>
<p><strong>M茅todo de brecha estad铆stica</strong></p>
<p>No lo corremos porque no converge.</p>
<p><strong>M茅todo de silueta promedio</strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>region_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"silhouette"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo de silueta promedio"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-52-1.png" width="624" /></p>
</div>
<p><strong>Metodo completo</strong></p>
<p>No converge.</p>
<h3 id="zonas">Zonas</h3>
<p>Hay demasiada diferencia intra-cluster, y muy poca diferencia inter-cluster. Hay a煤n alguna superposici贸n. Es decir no se puede caracterizar a base de zonas.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>k2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/fpc/man/kmeansruns.html'>kmeansruns</a></span><span class='op'>(</span><span class='va'>zonas_3</span>, krange <span class='op'>=</span> <span class='fl'>4</span>, runs <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span></span>
<span><span class='co'># Suma de errores al cuadrado entre clusters: la separaci贸n entre los clusters explica el 47.5% de los datos</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_cluster.html'>fviz_cluster</a></span><span class='op'>(</span><span class='va'>k2</span>, data <span class='op'>=</span> <span class='va'>zonas_3</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-53-1.png" width="624" /></p>
</div>
<p><strong>M茅todo de codos</strong></p>
<p>Indica k optimo es 10.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>zonas_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"wss"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo codos"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-54-1.png" width="624" /></p>
</div>
<p><strong>M茅todo de silueta promedio</strong></p>
<p>Indica k optimo es 10.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>zonas_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"silhouette"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo de silueta promedio"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-55-1.png" width="624" /></p>
</div>
<h1 id="imaginemos.">IMAGINEMOS.</h1>
<p>Imaginiemos que nada es correcto en nuestra hip贸tesis y que tenemos que ir a zero. Que no caracterizamos a base de indicadores espaciales. Caracterizamos a base de nuestras variables de control que conceptualmente eran las que eran ciertas. Es decir, caracterizamos a base de la Edad, el Nivel socio-econ贸mico, el Nivel de educaci贸n. Vamos a ver que tal!</p>
<h3 id="edad">Edad</h3>
<p>Tampoco se pueden dividir clusters a base de la edad. No hay caracterizaci贸n que hacer entre personas de diferentes edades.</p>
<p>Entre cluster 1, y 2 si hay alguna diferencia interesante.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>k3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/fpc/man/kmeansruns.html'>kmeansruns</a></span><span class='op'>(</span><span class='va'>edad_3</span>, krange <span class='op'>=</span> <span class='fl'>3</span>, runs <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span></span>
<span><span class='co'># Suma de errores al cuadrado entre clusters: la separaci贸n entre los clusters explica el 47.5% de los datos</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_cluster.html'>fviz_cluster</a></span><span class='op'>(</span><span class='va'>k3</span>, data <span class='op'>=</span> <span class='va'>edad_3</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-56-1.png" width="624" /></p>
</div>
<p><strong>M茅todo de codos</strong></p>
<p>Indica k optimo es 3.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>edad_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"wss"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo codos"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-57-1.png" width="624" /></p>
</div>
<p><strong>M茅todo de silueta promedio</strong></p>
<p>Indica k optimo es 2.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>edad_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"silhouette"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo de silueta promedio"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-58-1.png" width="624" /></p>
</div>
<h3 id="nivel-socio-econ贸mico">Nivel socio-econ贸mico</h3>
<p>Partimos el k clusters en 5, a pesar del algoritmo, ya que hay solo 5 maneras de caracterizar el NSE. A煤n asi vemos que hay mucha superposici贸n entre alg煤nos clusters.</p>
<p>Entre 1,2,5 si hay una diferencia que se podria investigar.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>k4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/fpc/man/kmeansruns.html'>kmeansruns</a></span><span class='op'>(</span><span class='va'>nse_3</span>, krange <span class='op'>=</span> <span class='fl'>5</span>, runs <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span></span>
<span><span class='co'># Suma de errores al cuadrado entre clusters: la separaci贸n entre los clusters explica el 47.5% de los datos</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_cluster.html'>fviz_cluster</a></span><span class='op'>(</span><span class='va'>k4</span>, data <span class='op'>=</span> <span class='va'>nse_3</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-59-1.png" width="624" /></p>
</div>
<p><strong>Metodo de codos</strong></p>
<p>Indica k optimo es 10.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>nse_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"wss"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo codos"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-60-1.png" width="624" /></p>
</div>
<p><strong>M茅todo de silueta promedio</strong></p>
<p>Indica k optimo es 10.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>nse_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"silhouette"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo de silueta promedio"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-61-1.png" width="624" /></p>
</div>
<h3 id="nivel-de-educacion">Nivel de educacion</h3>
<p>Demasiada superposici贸n. El sum of squares intra-cluster y inter-cluster tampoco es muy buena. Especialmente inter-cluster no esta muy bueno.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>k5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/fpc/man/kmeansruns.html'>kmeansruns</a></span><span class='op'>(</span><span class='va'>edu_3</span>, krange <span class='op'>=</span> <span class='fl'>10</span>, runs <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span></span>
<span><span class='co'># Suma de errores al cuadrado entre clusters: la separaci贸n entre los clusters explica el 47.5% de los datos</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_cluster.html'>fviz_cluster</a></span><span class='op'>(</span><span class='va'>k5</span>, data <span class='op'>=</span> <span class='va'>edu_3</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-62-1.png" width="624" /></p>
</div>
<p><strong>Metodo de codos</strong></p>
<p>Indica k optimo es 10.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>edu_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"wss"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo codos"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-63-1.png" width="624" /></p>
</div>
<p><strong>M茅todo de silueta promedio</strong></p>
<p>Indica k optimo es 2.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>edu_3</span>, <span class='va'>kmeans</span>, method <span class='op'>=</span> <span class='st'>"silhouette"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"M茅todo de silueta promedio"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="capitulo-3-creacin-de-modelos_files/figure-html5/unnamed-chunk-64-1.png" width="624" /></p>
</div>
<h4 id="section-4">5</h4>
<p>Bueno, podemos decir que hay unos clusters de baja calidad, pero de alg煤na calidad sin embargo para <strong>Nivel socio-econ贸mico</strong>. Parece haber una diferencia significativa entre grupos 1,2,5.</p>
<p>COMO INVESTIGAMOS ESTO AHORA?</p>
<div style="page-break-after: always;"></div>
<h3 id="modelo-regresi贸n-ordinalnominal-p21d">Modelo regresi贸n ordinal/nominal P21D</h3>
<ul>
<li>Seg煤n su percepci贸n, 驴cu谩n importante es el cambio clim谩tico para usted?</li>
</ul>
<h3 id="modelo-regresi贸n-logistica-ordinal-p1_mamb">Modelo regresi贸n logistica ordinal P1_MAmb</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># modelo_log_p1_control_1 &lt;- as.factor(P1_MAmb) ~ 1 + ZONAS.x + NSE + Edad + Estudiante + Niv_Edu + Razon_Bici</span></span>
<span><span class='co'># modelo_log_p1_sin_control &lt;- as.factor(P1_MAmb) ~ 1 + ZONAS.x </span></span>
<span><span class='co'># modelo_log_p1_control_2 &lt;- as.factor(P1_MAmb) ~ 1 + ZONAS.x + NSE + Edad</span></span>
<span><span class='co'># modelo_log_p1_control_3 &lt;- as.factor(P1_MAmb) ~ 1 + ZONAS.x + NSE + Edad + Estudiante + Niv_Edu + Religion + Razon_Bici + Transporte_mas_freq + Trab_Ingr</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># mod_log_p1_control_1 &lt;- polr(modelo_log_p1_control_1, method= c("logistic"), data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># mod_log_p1_sin_control &lt;- polr(modelo_log_p1_sin_control, method= c("logistic"), data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># mod_log_p1_control_2 &lt;- polr(modelo_log_p1_control_2, method= c("logistic"), data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># mod_log_p1_control_3 &lt;- polr(modelo_log_p1_control_3, method= c("logistic"), data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># modelos_p1 &lt;- list(mod_log_p1_control_1, mod_log_p1_control_2, mod_log_p1_control_3, mod_log_p1_sin_control)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># screenreg(modelos_p1)</span></span></code></pre>
</div>
</div>
<h3 id="modelo-regresi贸n-logistica-nominal-p2">Modelo regresi贸n logistica nominal P2</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># modelo_log_p2_control_1 &lt;- as.factor(P2_COD) ~ 1 + ZONAS.x + NSE + Edad + Estudiante + Niv_Edu + Razon_Bici</span></span>
<span><span class='co'># modelo_log_p2_sin_control &lt;- as.factor(P2_COD) ~ 1 + ZONAS.x </span></span>
<span><span class='co'># modelo_log_p2_control_2 &lt;-  as.factor(P2_COD) ~ 1 + ZONAS.x + NSE + Edad</span></span>
<span><span class='co'># modelo_log_p2_control_3 &lt;- as.factor(P2_COD) ~ 1 + ZONAS.x + NSE + Edad + Estudiante + Niv_Edu + Religion + Razon_Bici + Transporte_mas_freq + Trab_Ingr</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># mod_log_p2_control_1 &lt;- multinom(modelo_log_p2_control_1, data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># mod_log_p2_sin_control &lt;- multinom(modelo_log_p2_sin_control, data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># mod_log_p2_control_2 &lt;- multinom(modelo_log_p2_control_2, data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># mod_log_p2_control_3 &lt;- multinom(modelo_log_p2_control_3, data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># modelos_p2 &lt;- list(mod_log_p2_control_1, mod_log_p2_control_2, mod_log_p2_control_3, mod_log_p2_sin_control)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># screenreg(modelos_p2)</span></span></code></pre>
</div>
</div>
<h3 id="modelo-regresi贸n-logistica-nominal-p17">Modelo regresi贸n logistica nominal P17</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># modelo_log_p17_control_1 &lt;- as.factor(P2_COD) ~ 1 + ZONAS.x + NSE + Edad + Estudiante + Niv_Edu + Razon_Bici</span></span>
<span><span class='co'># modelo_log_p17_sin_control &lt;- as.factor(P2_COD) ~ 1 + ZONAS.x </span></span>
<span><span class='co'># modelo_log_p17_control_2 &lt;-  as.factor(P2_COD) ~ 1 + ZONAS.x + NSE + Edad</span></span>
<span><span class='co'># modelo_log_p17_control_3 &lt;- as.factor(P2_COD) ~ 1 + ZONAS.x + NSE + Edad + Estudiante + Niv_Edu + Religion + Razon_Bici + Transporte_mas_freq + Trab_Ingr</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># mod_log_p17_control_1 &lt;- multinom(modelo_log_p17_control_1, data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># mod_log_p17_sin_control &lt;- multinom(modelo_log_p17_sin_control, data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># mod_log_p17_control_2 &lt;- multinom(modelo_log_p17_control_2, data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># mod_log_p17_control_3 &lt;- multinom(modelo_log_p17_control_3, data = reg_total_clean, na.action = na.exclude)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># </span></span>
<span><span class='co'># modelos_p17 &lt;- list(mod_log_p17_control_1, mod_log_p17_control_2, mod_log_p17_control_3, mod_log_p17_sin_control)</span></span>
<span><span class='co'># </span></span>
<span><span class='co'># screenreg(modelos_p17)</span></span></code></pre>
</div>
</div>
<h3 id="modelo-regresi贸n-ordinalnominal-p21-promedio-b-c-y-d">Modelo regresi贸n ordinal/nominal P21 promedio (B, C y D)</h3>
<ul>
<li><strong>Promedio</strong>Seg煤n su percepci贸n, 驴cu谩n importante es el cambio clim谩tico para?: su regi贸n (B), familia y amigos (C), usted (D)</li>
</ul>
<h3 id="modelo-regresi贸n-lineal-multiple-p21-pca-b-c-y-d">Modelo regresi贸n lineal multiple P21 PCA (B, C y D)</h3>
<h3 id="modelo-regresi贸n-nominal-p2-como-afecta-el-medio-ambiente">Modelo regresi贸n nominal P2 (Como afecta el medio ambiente)</h3>
<ul>
<li>Seg煤n su percepci贸n, 驴cu谩l es el principal problema ambiental que lo afecta a Ud.? (codificado)</li>
</ul>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
